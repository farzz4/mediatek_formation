1773794085
441d63ebbc39eba359c9061ece8482bd-phpdoc%3Aab842358e5b640469cff71b1c3ba4737-ace3052a681d7ead0a9b5525b6b5b675
s:153224:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lIjtzOjM2OiI0YjVmYjM3YjEzMzFkZWM5ODlmYzJhMWYzZDBiM2ZhYS5waHAiO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAbmFtZXNwYWNlcyI7YTowOnt9czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBpbmNsdWRlcyI7YTowOnt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBmdW5jdGlvbnMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAY29uc3RhbnRzIjthOjA6e31zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNsYXNzZXMiO2E6MTp7czo0ODoiXF9fVHdpZ1RlbXBsYXRlXzcyZTQxZmNiYzQ2NGI3MmNlMWQxYTUwMzhkODRlZDExIjtPOjM1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXyI6MTU6e3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBpbXBsZW1lbnRzIjthOjA6e31zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AY29uc3RhbnRzIjthOjA6e31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AcHJvcGVydGllcyI7YToyOntzOjU3OiJcX19Ud2lnVGVtcGxhdGVfNzJlNDFmY2JjNDY0YjcyY2UxZDFhNTAzOGQ4NGVkMTE6OiRzb3VyY2UiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkiOjE0OntzOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQB0eXBlcyI7YTowOnt9czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAdmlzaWJpbGl0eSI7TzozOToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5IjoxOntzOjUxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5AHZpc2liaWxpdHkiO3M6NzoicHJpdmF0ZSI7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aToyMDtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO31zOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQBlbmRMb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6MjA7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6MDt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czo1NzoiXF9fVHdpZ1RlbXBsYXRlXzcyZTQxZmNiYzQ2NGI3MmNlMWQxYTUwMzhkODRlZDExOjokc291cmNlIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6Njoic291cmNlIjt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAZG9jQmxvY2siO047czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAZGVmYXVsdCI7TjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQBzdGF0aWMiO2I6MDtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQB0eXBlIjtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcT2JqZWN0XyI6MTp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xPYmplY3RfAGZxc2VuIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6MTI6IlxUd2lnXFNvdXJjZSI7czozNjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBuYW1lIjtzOjY6IlNvdXJjZSI7fX1zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQByZWFkT25seSI7YjowO3M6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AGhvb2tzIjthOjA6e31zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQB2aXJ0dWFsIjtiOjA7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAbWV0YWRhdGEiO2E6MDp7fXM6NDk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AGF0dHJpYnV0ZXMiO2E6MDp7fX1zOjU3OiJcX19Ud2lnVGVtcGxhdGVfNzJlNDFmY2JjNDY0YjcyY2UxZDFhNTAzOGQ4NGVkMTE6OiRtYWNyb3MiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkiOjE0OntzOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQB0eXBlcyI7YTowOnt9czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAdmlzaWJpbGl0eSI7TzozOToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5IjoxOntzOjUxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxWaXNpYmlsaXR5AHZpc2liaWxpdHkiO3M6NzoicHJpdmF0ZSI7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aToyNDtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO31zOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQBlbmRMb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6MjQ7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6MDt9czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czo1NzoiXF9fVHdpZ1RlbXBsYXRlXzcyZTQxZmNiYzQ2NGI3MmNlMWQxYTUwMzhkODRlZDExOjokbWFjcm9zIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6NjoibWFjcm9zIjt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAZG9jQmxvY2siO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jayI6Nzp7czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBzdW1tYXJ5IjtzOjA6IiI7czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBkZXNjcmlwdGlvbiI7Tzo0NToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXERlc2NyaXB0aW9uIjoyOntzOjU5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXERlc2NyaXB0aW9uAGJvZHlUZW1wbGF0ZSI7czowOiIiO3M6NTE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AdGFncyI7YTowOnt9fXM6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAdGFncyI7YToxOntpOjA7Tzo0MzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXFRhZ3NcVmFyXyI6NDp7czo3OiIAKgBuYW1lIjtzOjM6InZhciI7czoxNDoiACoAZGVzY3JpcHRpb24iO086NDU6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9ja1xEZXNjcmlwdGlvbiI6Mjp7czo1OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9ja1xEZXNjcmlwdGlvbgBib2R5VGVtcGxhdGUiO3M6MDoiIjtzOjUxOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXERlc2NyaXB0aW9uAHRhZ3MiO2E6MDp7fX1zOjc6IgAqAHR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xBcnJheV8iOjM6e3M6MTI6IgAqAHZhbHVlVHlwZSI7TzozODoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXE9iamVjdF8iOjE6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcT2JqZWN0XwBmcXNlbiI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjk6IlxUZW1wbGF0ZSI7czozNjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBuYW1lIjtzOjg6IlRlbXBsYXRlIjt9fXM6MTA6IgAqAGtleVR5cGUiO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xTdHJpbmdfIjowOnt9czoxNzoiACoAZGVmYXVsdEtleVR5cGUiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb21wb3VuZCI6Mjp7czo1MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xBZ2dyZWdhdGVkVHlwZQB0eXBlcyI7YToyOntpOjA7TzozODoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXFN0cmluZ18iOjA6e31pOjE7TzozODoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXEludGVnZXIiOjA6e319czo1MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xBZ2dyZWdhdGVkVHlwZQB0b2tlbiI7czoxOiJ8Ijt9fXM6MTU6IgAqAHZhcmlhYmxlTmFtZSI7czowOiIiO319czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBjb250ZXh0IjtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dCI6Mjp7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZSI7czowOiIiO3M6NTY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dABuYW1lc3BhY2VBbGlhc2VzIjthOjA6e319czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBsb2NhdGlvbiI7TjtzOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGlzVGVtcGxhdGVTdGFydCI7YjowO3M6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZUVuZCI7YjowO31zOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQBkZWZhdWx0IjtPOjM5OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEV4cHJlc3Npb24iOjI6e3M6NTE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEV4cHJlc3Npb24AZXhwcmVzc2lvbiI7czoyOiJbXSI7czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRXhwcmVzc2lvbgBwYXJ0cyI7YTowOnt9fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AHN0YXRpYyI7YjowO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AHR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xBcnJheV8iOjM6e3M6MTI6IgAqAHZhbHVlVHlwZSI7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXE1peGVkXyI6MDp7fXM6MTA6IgAqAGtleVR5cGUiO047czoxNzoiACoAZGVmYXVsdEtleVR5cGUiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb21wb3VuZCI6Mjp7czo1MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xBZ2dyZWdhdGVkVHlwZQB0eXBlcyI7YToyOntpOjA7TzozODoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXFN0cmluZ18iOjA6e31pOjE7TzozODoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXEludGVnZXIiOjA6e319czo1MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xBZ2dyZWdhdGVkVHlwZQB0b2tlbiI7czoxOiJ8Ijt9fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AHJlYWRPbmx5IjtiOjA7czo0NDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAaG9va3MiO2E6MDp7fXM6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFByb3BlcnR5AHZpcnR1YWwiO2I6MDtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxQcm9wZXJ0eQBtZXRhZGF0YSI7YTowOnt9czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcUHJvcGVydHkAYXR0cmlidXRlcyI7YTowOnt9fX1zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AbWV0aG9kcyI7YTo2OntzOjYzOiJcX19Ud2lnVGVtcGxhdGVfNzJlNDFmY2JjNDY0YjcyY2UxZDFhNTAzOGQ4NGVkMTE6Ol9fY29uc3RydWN0KCkiO086MzU6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kIjoxMzp7czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGFyZ3VtZW50cyI7YToxOntpOjA7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudCI6NTp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAdHlwZSI7TzozODoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXE9iamVjdF8iOjE6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcT2JqZWN0XwBmcXNlbiI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjE3OiJcVHdpZ1xFbnZpcm9ubWVudCI7czozNjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBuYW1lIjtzOjExOiJFbnZpcm9ubWVudCI7fX1zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABuYW1lIjtzOjM6ImVudiI7czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAZGVmYXVsdCI7TjtzOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABieVJlZmVyZW5jZSI7YjowO3M6NDk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGlzVmFyaWFkaWMiO2I6MDt9fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABsb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6MjY7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6NjQ4O31zOjQ4OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZW5kTG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjM2O3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjg2MTt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHJldHVyblR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xNaXhlZF8iOjA6e31zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czo2MzoiXF9fVHdpZ1RlbXBsYXRlXzcyZTQxZmNiYzQ2NGI3MmNlMWQxYTUwMzhkODRlZDExOjpfX2NvbnN0cnVjdCgpIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6MTE6Il9fY29uc3RydWN0Ijt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHZpc2liaWxpdHkiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eSI6MTp7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eQB2aXNpYmlsaXR5IjtzOjY6InB1YmxpYyI7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABkb2NCbG9jayI7TjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYWJzdHJhY3QiO2I6MDtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAc3RhdGljIjtiOjA7czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGZpbmFsIjtiOjA7czo1NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGhhc1JldHVybkJ5UmVmZXJlbmNlIjtiOjA7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAG1ldGFkYXRhIjthOjA6e31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYXR0cmlidXRlcyI7YTowOnt9fXM6NjE6IlxfX1R3aWdUZW1wbGF0ZV83MmU0MWZjYmM0NjRiNzJjZTFkMWE1MDM4ZDg0ZWQxMTo6ZG9EaXNwbGF5KCkiO086MzU6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kIjoxMzp7czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGFyZ3VtZW50cyI7YToyOntpOjA7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudCI6NTp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAdHlwZSI7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXEFycmF5XyI6Mzp7czoxMjoiACoAdmFsdWVUeXBlIjtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcTWl4ZWRfIjowOnt9czoxMDoiACoAa2V5VHlwZSI7TjtzOjE3OiIAKgBkZWZhdWx0S2V5VHlwZSI7TzozOToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXENvbXBvdW5kIjoyOntzOjUyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXEFnZ3JlZ2F0ZWRUeXBlAHR5cGVzIjthOjI6e2k6MDtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcU3RyaW5nXyI6MDp7fWk6MTtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcSW50ZWdlciI6MDp7fX1zOjUyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXEFnZ3JlZ2F0ZWRUeXBlAHRva2VuIjtzOjE6InwiO319czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAbmFtZSI7czo3OiJjb250ZXh0IjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABkZWZhdWx0IjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGJ5UmVmZXJlbmNlIjtiOjA7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAaXNWYXJpYWRpYyI7YjowO31pOjE7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudCI6NTp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAdHlwZSI7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXEFycmF5XyI6Mzp7czoxMjoiACoAdmFsdWVUeXBlIjtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcTWl4ZWRfIjowOnt9czoxMDoiACoAa2V5VHlwZSI7TjtzOjE3OiIAKgBkZWZhdWx0S2V5VHlwZSI7TzozOToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXENvbXBvdW5kIjoyOntzOjUyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXEFnZ3JlZ2F0ZWRUeXBlAHR5cGVzIjthOjI6e2k6MDtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcU3RyaW5nXyI6MDp7fWk6MTtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcSW50ZWdlciI6MDp7fX1zOjUyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXEFnZ3JlZ2F0ZWRUeXBlAHRva2VuIjtzOjE6InwiO319czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAbmFtZSI7czo2OiJibG9ja3MiO3M6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEFyZ3VtZW50AGRlZmF1bHQiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRXhwcmVzc2lvbiI6Mjp7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRXhwcmVzc2lvbgBleHByZXNzaW9uIjtzOjI6IltdIjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxFeHByZXNzaW9uAHBhcnRzIjthOjA6e319czo1MDoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQXJndW1lbnQAYnlSZWZlcmVuY2UiO2I6MDtzOjQ5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxBcmd1bWVudABpc1ZhcmlhZGljIjtiOjA7fX1zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjM4O3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjg2ODt9czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGVuZExvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aTo5NjQ7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6NDc4MjY7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZAByZXR1cm5UeXBlIjtPOjQwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcSXRlcmFibGVfIjozOntzOjEyOiIAKgB2YWx1ZVR5cGUiO086Mzc6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xNaXhlZF8iOjA6e31zOjEwOiIAKgBrZXlUeXBlIjtOO3M6MTc6IgAqAGRlZmF1bHRLZXlUeXBlIjtPOjM5OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29tcG91bmQiOjI6e3M6NTI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQWdncmVnYXRlZFR5cGUAdHlwZXMiO2E6Mjp7aTowO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xTdHJpbmdfIjowOnt9aToxO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xJbnRlZ2VyIjowOnt9fXM6NTI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQWdncmVnYXRlZFR5cGUAdG9rZW4iO3M6MToifCI7fX1zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czo2MToiXF9fVHdpZ1RlbXBsYXRlXzcyZTQxZmNiYzQ2NGI3MmNlMWQxYTUwMzhkODRlZDExOjpkb0Rpc3BsYXkoKSI7czozNjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBuYW1lIjtzOjk6ImRvRGlzcGxheSI7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZAB2aXNpYmlsaXR5IjtPOjM5OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFZpc2liaWxpdHkiOjE6e3M6NTE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFZpc2liaWxpdHkAdmlzaWJpbGl0eSI7czo5OiJwcm90ZWN0ZWQiO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZG9jQmxvY2siO047czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGFic3RyYWN0IjtiOjA7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHN0YXRpYyI7YjowO3M6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABmaW5hbCI7YjowO3M6NTc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABoYXNSZXR1cm5CeVJlZmVyZW5jZSI7YjowO3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABtZXRhZGF0YSI7YTowOnt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGF0dHJpYnV0ZXMiO2E6MDp7fX1zOjY3OiJcX19Ud2lnVGVtcGxhdGVfNzJlNDFmY2JjNDY0YjcyY2UxZDFhNTAzOGQ4NGVkMTE6OmdldFRlbXBsYXRlTmFtZSgpIjtPOjM1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZCI6MTM6e3M6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhcmd1bWVudHMiO2E6MDp7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABsb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6OTY5O3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjQ3ODc2O31zOjQ4OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZW5kTG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjk3MjtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTo0Nzk4Njt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHJldHVyblR5cGUiO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xTdHJpbmdfIjowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGZxc2VuIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6Njc6IlxfX1R3aWdUZW1wbGF0ZV83MmU0MWZjYmM0NjRiNzJjZTFkMWE1MDM4ZDg0ZWQxMTo6Z2V0VGVtcGxhdGVOYW1lKCkiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czoxNToiZ2V0VGVtcGxhdGVOYW1lIjt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHZpc2liaWxpdHkiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eSI6MTp7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eQB2aXNpYmlsaXR5IjtzOjY6InB1YmxpYyI7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABkb2NCbG9jayI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrIjo3OntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHN1bW1hcnkiO3M6MDoiIjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGRlc2NyaXB0aW9uIjtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24iOjI6e3M6NTk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AYm9keVRlbXBsYXRlIjtzOjA6IiI7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9ja1xEZXNjcmlwdGlvbgB0YWdzIjthOjA6e319czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawB0YWdzIjthOjE6e2k6MDtPOjQ2OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcVGFnc1xHZW5lcmljIjoyOntzOjc6IgAqAG5hbWUiO3M6MTg6ImNvZGVDb3ZlcmFnZUlnbm9yZSI7czoxNDoiACoAZGVzY3JpcHRpb24iO047fX1zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGNvbnRleHQiO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0IjoyOntzOjQ5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXENvbnRleHQAbmFtZXNwYWNlIjtzOjA6IiI7czo1NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZUFsaWFzZXMiO2E6MDp7fX1zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGxvY2F0aW9uIjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZVN0YXJ0IjtiOjA7czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBpc1RlbXBsYXRlRW5kIjtiOjA7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhYnN0cmFjdCI7YjowO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABzdGF0aWMiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZmluYWwiO2I6MDtzOjU3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAaGFzUmV0dXJuQnlSZWZlcmVuY2UiO2I6MDtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbWV0YWRhdGEiO2E6MDp7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhdHRyaWJ1dGVzIjthOjA6e319czo2MzoiXF9fVHdpZ1RlbXBsYXRlXzcyZTQxZmNiYzQ2NGI3MmNlMWQxYTUwMzhkODRlZDExOjppc1RyYWl0YWJsZSgpIjtPOjM1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZCI6MTM6e3M6NDY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhcmd1bWVudHMiO2E6MDp7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABsb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6OTc3O3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjQ4MDM2O31zOjQ4OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZW5kTG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjk4MDtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTo0ODEwNDt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHJldHVyblR5cGUiO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xCb29sZWFuIjowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGZxc2VuIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6NjM6IlxfX1R3aWdUZW1wbGF0ZV83MmU0MWZjYmM0NjRiNzJjZTFkMWE1MDM4ZDg0ZWQxMTo6aXNUcmFpdGFibGUoKSI7czozNjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBuYW1lIjtzOjExOiJpc1RyYWl0YWJsZSI7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZAB2aXNpYmlsaXR5IjtPOjM5OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFZpc2liaWxpdHkiOjE6e3M6NTE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXFZpc2liaWxpdHkAdmlzaWJpbGl0eSI7czo2OiJwdWJsaWMiO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZG9jQmxvY2siO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jayI6Nzp7czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBzdW1tYXJ5IjtzOjA6IiI7czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBkZXNjcmlwdGlvbiI7Tzo0NToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXERlc2NyaXB0aW9uIjoyOntzOjU5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXERlc2NyaXB0aW9uAGJvZHlUZW1wbGF0ZSI7czowOiIiO3M6NTE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AdGFncyI7YTowOnt9fXM6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAdGFncyI7YToxOntpOjA7Tzo0NjoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrXFRhZ3NcR2VuZXJpYyI6Mjp7czo3OiIAKgBuYW1lIjtzOjE4OiJjb2RlQ292ZXJhZ2VJZ25vcmUiO3M6MTQ6IgAqAGRlc2NyaXB0aW9uIjtOO319czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBjb250ZXh0IjtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dCI6Mjp7czo0OToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZSI7czowOiIiO3M6NTY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcQ29udGV4dABuYW1lc3BhY2VBbGlhc2VzIjthOjA6e319czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBsb2NhdGlvbiI7TjtzOjUwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGlzVGVtcGxhdGVTdGFydCI7YjowO3M6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZUVuZCI7YjowO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYWJzdHJhY3QiO2I6MDtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAc3RhdGljIjtiOjA7czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGZpbmFsIjtiOjA7czo1NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGhhc1JldHVybkJ5UmVmZXJlbmNlIjtiOjA7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAG1ldGFkYXRhIjthOjA6e31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYXR0cmlidXRlcyI7YTowOnt9fXM6NjQ6IlxfX1R3aWdUZW1wbGF0ZV83MmU0MWZjYmM0NjRiNzJjZTFkMWE1MDM4ZDg0ZWQxMTo6Z2V0RGVidWdJbmZvKCkiO086MzU6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kIjoxMzp7czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGFyZ3VtZW50cyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aTo5ODU7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6NDgxNTQ7fXM6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABlbmRMb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6OTg4O3M6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AY29sdW1uTnVtYmVyIjtpOjQ4MzkwO31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAcmV0dXJuVHlwZSI7TzozNzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXEFycmF5XyI6Mzp7czoxMjoiACoAdmFsdWVUeXBlIjtPOjM3OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcTWl4ZWRfIjowOnt9czoxMDoiACoAa2V5VHlwZSI7TjtzOjE3OiIAKgBkZWZhdWx0S2V5VHlwZSI7TzozOToicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXENvbXBvdW5kIjoyOntzOjUyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXEFnZ3JlZ2F0ZWRUeXBlAHR5cGVzIjthOjI6e2k6MDtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcU3RyaW5nXyI6MDp7fWk6MTtPOjM4OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cVHlwZXNcSW50ZWdlciI6MDp7fX1zOjUyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXEFnZ3JlZ2F0ZWRUeXBlAHRva2VuIjtzOjE6InwiO319czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGZxc2VuIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6NjQ6IlxfX1R3aWdUZW1wbGF0ZV83MmU0MWZjYmM0NjRiNzJjZTFkMWE1MDM4ZDg0ZWQxMTo6Z2V0RGVidWdJbmZvKCkiO3M6MzY6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AbmFtZSI7czoxMjoiZ2V0RGVidWdJbmZvIjt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHZpc2liaWxpdHkiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eSI6MTp7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eQB2aXNpYmlsaXR5IjtzOjY6InB1YmxpYyI7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABkb2NCbG9jayI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrIjo3OntzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAHN1bW1hcnkiO3M6MDoiIjtzOjQ2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGRlc2NyaXB0aW9uIjtPOjQ1OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24iOjI6e3M6NTk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcRGVzY3JpcHRpb24AYm9keVRlbXBsYXRlIjtzOjA6IiI7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9ja1xEZXNjcmlwdGlvbgB0YWdzIjthOjA6e319czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawB0YWdzIjthOjE6e2k6MDtPOjQ2OiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2tcVGFnc1xHZW5lcmljIjoyOntzOjc6IgAqAG5hbWUiO3M6MTg6ImNvZGVDb3ZlcmFnZUlnbm9yZSI7czoxNDoiACoAZGVzY3JpcHRpb24iO047fX1zOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGNvbnRleHQiO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0IjoyOntzOjQ5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXENvbnRleHQAbmFtZXNwYWNlIjtzOjA6IiI7czo1NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xDb250ZXh0AG5hbWVzcGFjZUFsaWFzZXMiO2E6MDp7fX1zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXERvY0Jsb2NrAGxvY2F0aW9uIjtOO3M6NTA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRG9jQmxvY2sAaXNUZW1wbGF0ZVN0YXJ0IjtiOjA7czo0ODoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxEb2NCbG9jawBpc1RlbXBsYXRlRW5kIjtiOjA7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhYnN0cmFjdCI7YjowO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABzdGF0aWMiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAZmluYWwiO2I6MDtzOjU3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAaGFzUmV0dXJuQnlSZWZlcmVuY2UiO2I6MDtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAbWV0YWRhdGEiO2E6MDp7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABhdHRyaWJ1dGVzIjthOjA6e319czo2ODoiXF9fVHdpZ1RlbXBsYXRlXzcyZTQxZmNiYzQ2NGI3MmNlMWQxYTUwMzhkODRlZDExOjpnZXRTb3VyY2VDb250ZXh0KCkiO086MzU6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kIjoxMzp7czo0NjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGFyZ3VtZW50cyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aTo5OTA7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6NDgzOTc7fXM6NDg6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABlbmRMb2NhdGlvbiI7TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uIjoyOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGxpbmVOdW1iZXIiO2k6MTg2OTtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTo5MDU1MTt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHJldHVyblR5cGUiO086Mzg6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxUeXBlc1xPYmplY3RfIjoxOntzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFR5cGVzXE9iamVjdF8AZnFzZW4iO086MzA6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbiI6Mjp7czozNzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBmcXNlbiI7czoxMjoiXFR3aWdcU291cmNlIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6NjoiU291cmNlIjt9fXM6NDI6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABmcXNlbiI7TzozMDoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuIjoyOntzOjM3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAGZxc2VuIjtzOjY4OiJcX19Ud2lnVGVtcGxhdGVfNzJlNDFmY2JjNDY0YjcyY2UxZDFhNTAzOGQ4NGVkMTE6OmdldFNvdXJjZUNvbnRleHQoKSI7czozNjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBuYW1lIjtzOjE2OiJnZXRTb3VyY2VDb250ZXh0Ijt9czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAHZpc2liaWxpdHkiO086Mzk6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eSI6MTp7czo1MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcVmlzaWJpbGl0eQB2aXNpYmlsaXR5IjtzOjY6InB1YmxpYyI7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXE1ldGhvZABkb2NCbG9jayI7TjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYWJzdHJhY3QiO2I6MDtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAc3RhdGljIjtiOjA7czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGZpbmFsIjtiOjA7czo1NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAGhhc1JldHVybkJ5UmVmZXJlbmNlIjtiOjA7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcTWV0aG9kAG1ldGFkYXRhIjthOjA6e31zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxNZXRob2QAYXR0cmlidXRlcyI7YTowOnt9fX1zOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AdXNlZFRyYWl0cyI7YTowOnt9czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGxvY2F0aW9uIjtPOjMzOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24iOjI6e3M6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cTG9jYXRpb24AbGluZU51bWJlciI7aToxODtzOjQ3OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXExvY2F0aW9uAGNvbHVtbk51bWJlciI7aTowO31zOjQ4OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AZW5kTG9jYXRpb24iO086MzM6InBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbiI6Mjp7czo0NToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBsaW5lTnVtYmVyIjtpOjE4NzA7czo0NzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxMb2NhdGlvbgBjb2x1bW5OdW1iZXIiO2k6MDt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcQ2xhc3NfAGZxc2VuIjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6NDg6IlxfX1R3aWdUZW1wbGF0ZV83MmU0MWZjYmM0NjRiNzJjZTFkMWE1MDM4ZDg0ZWQxMSI7czozNjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxGcXNlbgBuYW1lIjtzOjQ3OiJfX1R3aWdUZW1wbGF0ZV83MmU0MWZjYmM0NjRiNzJjZTFkMWE1MDM4ZDg0ZWQxMSI7fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBkb2NCbG9jayI7TjtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AcGFyZW50IjtPOjMwOiJwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4iOjI6e3M6Mzc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cRnFzZW4AZnFzZW4iO3M6MTQ6IlxUd2lnXFRlbXBsYXRlIjtzOjM2OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXEZxc2VuAG5hbWUiO3M6ODoiVGVtcGxhdGUiO31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AYWJzdHJhY3QiO2I6MDtzOjQyOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AZmluYWwiO2I6MDtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AcmVhZE9ubHkiO2I6MDtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxDbGFzc18AbWV0YWRhdGEiO2E6MDp7fXM6NDc6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXENsYXNzXwBhdHRyaWJ1dGVzIjthOjA6e319fXM6NDU6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW50ZXJmYWNlcyI7YTowOnt9czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQB0cmFpdHMiO2E6MDp7fXM6NDA6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZW51bXMiO2E6MDp7fXM6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaGFzaCI7czozMjoiYWNlMzA1MmE2ODFkN2VhZDBhOWI1NTI1YjZiNWI2NzUiO3M6Mzk6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAcGF0aCI7czo1ODoidmFyL2NhY2hlL2Rldi90d2lnLzRiLzRiNWZiMzdiMTMzMWRlYzk4OWZjMmExZjNkMGIzZmFhLnBocCI7czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBzb3VyY2UiO3M6OTA1NTU6Ijw/cGhwCgp1c2UgVHdpZ1xFbnZpcm9ubWVudDsKdXNlIFR3aWdcRXJyb3JcTG9hZGVyRXJyb3I7CnVzZSBUd2lnXEVycm9yXFJ1bnRpbWVFcnJvcjsKdXNlIFR3aWdcRXh0ZW5zaW9uXENvcmVFeHRlbnNpb247CnVzZSBUd2lnXEV4dGVuc2lvblxTYW5kYm94RXh0ZW5zaW9uOwp1c2UgVHdpZ1xNYXJrdXA7CnVzZSBUd2lnXFNhbmRib3hcU2VjdXJpdHlFcnJvcjsKdXNlIFR3aWdcU2FuZGJveFxTZWN1cml0eU5vdEFsbG93ZWRUYWdFcnJvcjsKdXNlIFR3aWdcU2FuZGJveFxTZWN1cml0eU5vdEFsbG93ZWRGaWx0ZXJFcnJvcjsKdXNlIFR3aWdcU2FuZGJveFxTZWN1cml0eU5vdEFsbG93ZWRGdW5jdGlvbkVycm9yOwp1c2UgVHdpZ1xTb3VyY2U7CnVzZSBUd2lnXFRlbXBsYXRlOwp1c2UgVHdpZ1xUZW1wbGF0ZVdyYXBwZXI7CgovKiBAV2ViUHJvZmlsZXIvUHJvZmlsZXIvYmFzZV9qcy5odG1sLnR3aWcgKi8KY2xhc3MgX19Ud2lnVGVtcGxhdGVfNzJlNDFmY2JjNDY0YjcyY2UxZDFhNTAzOGQ4NGVkMTEgZXh0ZW5kcyBUZW1wbGF0ZQp7CiAgICBwcml2YXRlIFNvdXJjZSAkc291cmNlOwogICAgLyoqCiAgICAgKiBAdmFyIGFycmF5PHN0cmluZywgVGVtcGxhdGU+CiAgICAgKi8KICAgIHByaXZhdGUgYXJyYXkgJG1hY3JvcyA9IFtdOwoKICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdChFbnZpcm9ubWVudCAkZW52KQogICAgewogICAgICAgIHBhcmVudDo6X19jb25zdHJ1Y3QoJGVudik7CgogICAgICAgICR0aGlzLT5zb3VyY2UgPSAkdGhpcy0+Z2V0U291cmNlQ29udGV4dCgpOwoKICAgICAgICAkdGhpcy0+cGFyZW50ID0gZmFsc2U7CgogICAgICAgICR0aGlzLT5ibG9ja3MgPSBbCiAgICAgICAgXTsKICAgIH0KCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gZG9EaXNwbGF5KGFycmF5ICRjb250ZXh0LCBhcnJheSAkYmxvY2tzID0gW10pOiBpdGVyYWJsZQogICAgewogICAgICAgICRtYWNyb3MgPSAkdGhpcy0+bWFjcm9zOwogICAgICAgICRfX2ludGVybmFsXzVhMjdhOGJhMjFjYTc5YjYxOTMyMzc2YjJmYTkyMmQyID0gJHRoaXMtPmV4dGVuc2lvbnNbIlN5bWZvbnlcXEJ1bmRsZVxcV2ViUHJvZmlsZXJCdW5kbGVcXFR3aWdcXFdlYlByb2ZpbGVyRXh0ZW5zaW9uIl07CiAgICAgICAgJF9faW50ZXJuYWxfNWEyN2E4YmEyMWNhNzliNjE5MzIzNzZiMmZhOTIyZDItPmVudGVyKCRfX2ludGVybmFsXzVhMjdhOGJhMjFjYTc5YjYxOTMyMzc2YjJmYTkyMmQyX3Byb2YgPSBuZXcgXFR3aWdcUHJvZmlsZXJcUHJvZmlsZSgkdGhpcy0+Z2V0VGVtcGxhdGVOYW1lKCksICJ0ZW1wbGF0ZSIsICJAV2ViUHJvZmlsZXIvUHJvZmlsZXIvYmFzZV9qcy5odG1sLnR3aWciKSk7CgogICAgICAgICRfX2ludGVybmFsXzZmNDdiYmU5OTgzYWY4MWYxZTc0NTBlOWEzZTM3NjhmID0gJHRoaXMtPmV4dGVuc2lvbnNbIlN5bWZvbnlcXEJyaWRnZVxcVHdpZ1xcRXh0ZW5zaW9uXFxQcm9maWxlckV4dGVuc2lvbiJdOwogICAgICAgICRfX2ludGVybmFsXzZmNDdiYmU5OTgzYWY4MWYxZTc0NTBlOWEzZTM3NjhmLT5lbnRlcigkX19pbnRlcm5hbF82ZjQ3YmJlOTk4M2FmODFmMWU3NDUwZTlhM2UzNzY4Zl9wcm9mID0gbmV3IFxUd2lnXFByb2ZpbGVyXFByb2ZpbGUoJHRoaXMtPmdldFRlbXBsYXRlTmFtZSgpLCAidGVtcGxhdGUiLCAiQFdlYlByb2ZpbGVyL1Byb2ZpbGVyL2Jhc2VfanMuaHRtbC50d2lnIikpOwoKICAgICAgICAvLyBsaW5lIDMKICAgICAgICB5aWVsZCAiPHNjcmlwdCI7CiAgICAgICAgaWYgKChhcnJheV9rZXlfZXhpc3RzKCJjc3Bfc2NyaXB0X25vbmNlIiwgJGNvbnRleHQpICYmIChpc3NldCgkY29udGV4dFsiY3NwX3NjcmlwdF9ub25jZSJdKSB8fCBhcnJheV9rZXlfZXhpc3RzKCJjc3Bfc2NyaXB0X25vbmNlIiwgJGNvbnRleHQpID8gJGNvbnRleHRbImNzcF9zY3JpcHRfbm9uY2UiXSA6IChmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBSdW50aW1lRXJyb3IoJ1ZhcmlhYmxlICJjc3Bfc2NyaXB0X25vbmNlIiBkb2VzIG5vdCBleGlzdC4nLCAzLCAkdGhpcy0+c291cmNlKTsgfSkoKSkpKSB7CiAgICAgICAgICAgIHlpZWxkICIgbm9uY2U9XCIiOwogICAgICAgICAgICB5aWVsZCAkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKChpc3NldCgkY29udGV4dFsiY3NwX3NjcmlwdF9ub25jZSJdKSB8fCBhcnJheV9rZXlfZXhpc3RzKCJjc3Bfc2NyaXB0X25vbmNlIiwgJGNvbnRleHQpID8gJGNvbnRleHRbImNzcF9zY3JpcHRfbm9uY2UiXSA6IChmdW5jdGlvbiAoKSB7IHRocm93IG5ldyBSdW50aW1lRXJyb3IoJ1ZhcmlhYmxlICJjc3Bfc2NyaXB0X25vbmNlIiBkb2VzIG5vdCBleGlzdC4nLCAzLCAkdGhpcy0+c291cmNlKTsgfSkoKSksICJodG1sIiwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgICAgIHlpZWxkICJcIiI7CiAgICAgICAgfQogICAgICAgIHlpZWxkICI+Lyo8IVtDREFUQVsqLwogICAgIjsKICAgICAgICAvLyBsaW5lIDcKICAgICAgICB5aWVsZCAiCmlmICh0eXBlb2YgU2ZqcyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIFNmanMubG9hZFRvb2xiYXIgPT09ICd1bmRlZmluZWQnKSB7CiAgICBTZmpzID0gKGZ1bmN0aW9uKCkgewogICAgICAgIFwidXNlIHN0cmljdFwiOwoKICAgICAgICBpZiAoJ2NsYXNzTGlzdCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSB7CiAgICAgICAgICAgIHZhciBoYXNDbGFzcyA9IGZ1bmN0aW9uIChlbCwgY3NzQ2xhc3MpIHsgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucyhjc3NDbGFzcyk7IH07CiAgICAgICAgICAgIHZhciByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKGVsLCBjc3NDbGFzcykgeyBlbC5jbGFzc0xpc3QucmVtb3ZlKGNzc0NsYXNzKTsgfTsKICAgICAgICAgICAgdmFyIGFkZENsYXNzID0gZnVuY3Rpb24oZWwsIGNzc0NsYXNzKSB7IGVsLmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3MpOyB9OwogICAgICAgICAgICB2YXIgdG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbihlbCwgY3NzQ2xhc3MpIHsgZWwuY2xhc3NMaXN0LnRvZ2dsZShjc3NDbGFzcyk7IH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGhhc0NsYXNzID0gZnVuY3Rpb24gKGVsLCBjc3NDbGFzcykgeyByZXR1cm4gZWwuY2xhc3NOYW1lLm1hdGNoKG5ldyBSZWdFeHAoJ1xcXFxiJyArIGNzc0NsYXNzICsgJ1xcXFxiJykpOyB9OwogICAgICAgICAgICB2YXIgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbihlbCwgY3NzQ2xhc3MpIHsgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobmV3IFJlZ0V4cCgnXFxcXGInICsgY3NzQ2xhc3MgKyAnXFxcXGInKSwgJyAnKTsgfTsKICAgICAgICAgICAgdmFyIGFkZENsYXNzID0gZnVuY3Rpb24oZWwsIGNzc0NsYXNzKSB7IGlmICghaGFzQ2xhc3MoZWwsIGNzc0NsYXNzKSkgeyBlbC5jbGFzc05hbWUgKz0gXCIgXCIgKyBjc3NDbGFzczsgfSB9OwogICAgICAgICAgICB2YXIgdG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbihlbCwgY3NzQ2xhc3MpIHsgaGFzQ2xhc3MoZWwsIGNzc0NsYXNzKSA/IHJlbW92ZUNsYXNzKGVsLCBjc3NDbGFzcykgOiBhZGRDbGFzcyhlbCwgY3NzQ2xhc3MpOyB9OwogICAgICAgIH0KCiAgICAgICAgdmFyIG5vb3AgPSBmdW5jdGlvbigpIHt9OwoKICAgICAgICB2YXIgcHJvZmlsZXJTdG9yYWdlS2V5ID0gJ3N5bWZvbnkvcHJvZmlsZXIvJzsKCiAgICAgICAgdmFyIGFkZEV2ZW50TGlzdGVuZXI7CgogICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIGlmICghKCdhZGRFdmVudExpc3RlbmVyJyBpbiBlbCkpIHsKICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCdvbicgKyBldmVudE5hbWUsIGNhbGxiYWNrKTsKICAgICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50TmFtZSwgY2FsbGJhY2spIHsKICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrLCBmYWxzZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBpZiAobmF2aWdhdG9yLmNsaXBib2FyZCkgewogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jbGlwYm9hcmQtdGV4dF0nKS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGVsZW1lbnQsICdoaWRkZW4nKTsKICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jbGlwYm9hcmQtdGV4dCcpKTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIHJlcXVlc3QgPSBmdW5jdGlvbih1cmwsIG9uU3VjY2Vzcywgb25FcnJvciwgcGF5bG9hZCwgb3B0aW9ucywgdHJpZXMpIHsKICAgICAgICAgICAgdmFyIHhociA9IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCA/IG5ldyBYTUxIdHRwUmVxdWVzdCgpIDogbmV3IEFjdGl2ZVhPYmplY3QoJ01pY3Jvc29mdC5YTUxIVFRQJyk7CiAgICAgICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OwogICAgICAgICAgICBvcHRpb25zLnJldHJ5ID0gb3B0aW9ucy5yZXRyeSB8fCBmYWxzZTsKICAgICAgICAgICAgdHJpZXMgPSB0cmllcyB8fCAxOwogICAgICAgICAgICAvKiB0aGlzIGRlbGF5cyBmb3IgMTI1LCAzNzUsIDYyNSwgODc1LCBhbmQgMTAwMCwgLi4uICovCiAgICAgICAgICAgIHZhciBkZWxheSA9IHRyaWVzIDwgNSA/ICh0cmllcyAtIDAuNSkgKiAyNTAgOiAxMDAwOwoKICAgICAgICAgICAgeGhyLm9wZW4ob3B0aW9ucy5tZXRob2QgfHwgJ0dFVCcsIHVybCwgdHJ1ZSk7CiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0Jyk7CiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbihzdGF0ZSkgewogICAgICAgICAgICAgICAgaWYgKDQgIT09IHhoci5yZWFkeVN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gNDA0ICYmIG9wdGlvbnMucmV0cnkgJiYgIW9wdGlvbnMuc3RvcCkgewogICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN0b3ApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0KHVybCwgb25TdWNjZXNzLCBvbkVycm9yLCBwYXlsb2FkLCBvcHRpb25zLCB0cmllcyArIDEpOwogICAgICAgICAgICAgICAgICAgIH0sIGRlbGF5KTsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKDIwMCA9PT0geGhyLnN0YXR1cykgewogICAgICAgICAgICAgICAgICAgIChvblN1Y2Nlc3MgfHwgbm9vcCkoeGhyKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgKG9uRXJyb3IgfHwgbm9vcCkoeGhyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGlmIChvcHRpb25zLm9uU2VuZCkgewogICAgICAgICAgICAgICAgb3B0aW9ucy5vblNlbmQodHJpZXMpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB4aHIuc2VuZChwYXlsb2FkIHx8ICcnKTsKICAgICAgICB9OwoKICAgICAgICB2YXIgZ2V0UHJlZmVyZW5jZSA9IGZ1bmN0aW9uKG5hbWUpIHsKICAgICAgICAgICAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKHByb2ZpbGVyU3RvcmFnZUtleSArIG5hbWUpOwogICAgICAgIH07CgogICAgICAgIHZhciBzZXRQcmVmZXJlbmNlID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHsKICAgICAgICAgICAgaWYgKCF3aW5kb3cubG9jYWxTdG9yYWdlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0ocHJvZmlsZXJTdG9yYWdlS2V5ICsgbmFtZSwgdmFsdWUpOwogICAgICAgIH07CgogICAgICAgIHZhciByZXF1ZXN0U3RhY2sgPSBbXTsKCiAgICAgICAgdmFyIGV4dHJhY3RIZWFkZXJzID0gZnVuY3Rpb24oeGhyLCBzdGFja0VsZW1lbnQpIHsKICAgICAgICAgICAgLyogSGVyZSB3ZSBhdm9pZCB0byBjYWxsIHhoci5nZXRSZXNwb25zZUhlYWRlciBpbiBvcmRlciB0byAqLwogICAgICAgICAgICAvKiBwcmV2ZW50IHBvbGx1dGluZyB0aGUgY29uc29sZSB3aXRoIENPUlMgc2VjdXJpdHkgZXJyb3JzICovCiAgICAgICAgICAgIHZhciBhbGxIZWFkZXJzID0geGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpOwogICAgICAgICAgICB2YXIgcmV0OwoKICAgICAgICAgICAgaWYgKHJldCA9IGFsbEhlYWRlcnMubWF0Y2goL154LWRlYnVnLXRva2VuOlxccysoLiopXCQvaW0pKSB7CiAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQucHJvZmlsZSA9IHJldFsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocmV0ID0gYWxsSGVhZGVycy5tYXRjaCgvXngtZGVidWctdG9rZW4tbGluazpcXHMrKC4qKVwkL2ltKSkgewogICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnByb2ZpbGVyVXJsID0gcmV0WzFdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyZXQgPSBhbGxIZWFkZXJzLm1hdGNoKC9eU3ltZm9ueS1EZWJ1Zy1Ub29sYmFyLVJlcGxhY2U6XFxzKyguKilcJC9pbSkpIHsKICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC50b29sYmFyUmVwbGFjZUZpbmlzaGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQudG9vbGJhclJlcGxhY2UgPSAnMScgPT09IHJldFsxXTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHZhciBzdWNjZXNzU3RyZWFrID0gNDsKICAgICAgICB2YXIgcGVuZGluZ1JlcXVlc3RzID0gMDsKICAgICAgICB2YXIgcmVuZGVyQWpheFJlcXVlc3RzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciByZXF1ZXN0Q291bnRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWFqYXgtcmVxdWVzdC1jb3VudGVyJyk7CiAgICAgICAgICAgIGlmICghcmVxdWVzdENvdW50ZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXF1ZXN0Q291bnRlci50ZXh0Q29udGVudCA9IHJlcXVlc3RTdGFjay5sZW5ndGg7CgogICAgICAgICAgICB2YXIgaW5mb1NwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNmLXRvb2xiYXItYWpheC1pbmZvXCIpOwogICAgICAgICAgICBpZiAoaW5mb1NwYW4pIHsKICAgICAgICAgICAgICAgIGluZm9TcGFuLnRleHRDb250ZW50ID0gcmVxdWVzdFN0YWNrLmxlbmd0aCArICcgQUpBWCByZXF1ZXN0JyArIChyZXF1ZXN0U3RhY2subGVuZ3RoICE9PSAxID8gJ3MnIDogJycpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgYWpheFRvb2xiYXJQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWJsb2NrLWFqYXgnKTsKICAgICAgICAgICAgaWYgKHJlcXVlc3RTdGFjay5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGFqYXhUb29sYmFyUGFuZWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBhamF4VG9vbGJhclBhbmVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHBlbmRpbmdSZXF1ZXN0cyA+IDApIHsKICAgICAgICAgICAgICAgIGFkZENsYXNzKGFqYXhUb29sYmFyUGFuZWwsICdzZi1hamF4LXJlcXVlc3QtbG9hZGluZycpOwogICAgICAgICAgICB9IGVsc2UgaWYgKHN1Y2Nlc3NTdHJlYWsgPCA0KSB7CiAgICAgICAgICAgICAgICBhZGRDbGFzcyhhamF4VG9vbGJhclBhbmVsLCAnc2YtdG9vbGJhci1zdGF0dXMtcmVkJyk7CiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhhamF4VG9vbGJhclBhbmVsLCAnc2YtYWpheC1yZXF1ZXN0LWxvYWRpbmcnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGFqYXhUb29sYmFyUGFuZWwsICdzZi1hamF4LXJlcXVlc3QtbG9hZGluZycpOwogICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoYWpheFRvb2xiYXJQYW5lbCwgJ3NmLXRvb2xiYXItc3RhdHVzLXJlZCcpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgdmFyIHN0YXJ0QWpheFJlcXVlc3QgPSBmdW5jdGlvbihpbmRleCkgewogICAgICAgICAgICB2YXIgdGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1hamF4LXJlcXVlc3QtbGlzdCcpOwogICAgICAgICAgICBpZiAoIXRib2R5KSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBuYk9mQWpheFJlcXVlc3QgPSB0Ym9keS5yb3dzLmxlbmd0aDsKICAgICAgICAgICAgaWYgKG5iT2ZBamF4UmVxdWVzdCA+PSAxMDApIHsKICAgICAgICAgICAgICAgIHRib2R5LmRlbGV0ZVJvdygwKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSByZXF1ZXN0U3RhY2tbaW5kZXhdOwogICAgICAgICAgICBwZW5kaW5nUmVxdWVzdHMrKzsKICAgICAgICAgICAgdmFyIHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7CiAgICAgICAgICAgIHJlcXVlc3QuRE9NTm9kZSA9IHJvdzsKCiAgICAgICAgICAgIHZhciByZXF1ZXN0TnVtYmVyQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgIHJlcXVlc3ROdW1iZXJDZWxsLnRleHRDb250ZW50ID0gaW5kZXggKyAxOwogICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQocmVxdWVzdE51bWJlckNlbGwpOwoKICAgICAgICAgICAgdmFyIHByb2ZpbGVyQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgIHByb2ZpbGVyQ2VsbC50ZXh0Q29udGVudCA9ICduL2EnOwogICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQocHJvZmlsZXJDZWxsKTsKCiAgICAgICAgICAgIHZhciBtZXRob2RDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgbWV0aG9kQ2VsbC50ZXh0Q29udGVudCA9IHJlcXVlc3QubWV0aG9kOwogICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQobWV0aG9kQ2VsbCk7CgogICAgICAgICAgICB2YXIgdHlwZUNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICB0eXBlQ2VsbC50ZXh0Q29udGVudCA9IHJlcXVlc3QudHlwZTsKICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHR5cGVDZWxsKTsKCiAgICAgICAgICAgIHZhciBzdGF0dXNDb2RlQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgIHZhciBzdGF0dXNDb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICBzdGF0dXNDb2RlLnRleHRDb250ZW50ID0gJ24vYSc7CiAgICAgICAgICAgIHN0YXR1c0NvZGVDZWxsLmFwcGVuZENoaWxkKHN0YXR1c0NvZGUpOwogICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoc3RhdHVzQ29kZUNlbGwpOwoKICAgICAgICAgICAgdmFyIHBhdGhDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgcGF0aENlbGwuY2xhc3NOYW1lID0gJ3NmLWFqYXgtcmVxdWVzdC11cmwnOwogICAgICAgICAgICBpZiAoJ0dFVCcgPT09IHJlcXVlc3QubWV0aG9kKSB7CiAgICAgICAgICAgICAgICB2YXIgcGF0aExpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgICAgICAgICBwYXRoTGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCByZXF1ZXN0LnVybCk7CiAgICAgICAgICAgICAgICBwYXRoTGluay50ZXh0Q29udGVudCA9IHJlcXVlc3QudXJsOwogICAgICAgICAgICAgICAgcGF0aENlbGwuYXBwZW5kQ2hpbGQocGF0aExpbmspOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcGF0aENlbGwudGV4dENvbnRlbnQgPSByZXF1ZXN0LnVybDsKICAgICAgICAgICAgfQogICAgICAgICAgICBwYXRoQ2VsbC5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgcmVxdWVzdC51cmwpOwogICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQocGF0aENlbGwpOwoKICAgICAgICAgICAgdmFyIGR1cmF0aW9uQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgIGR1cmF0aW9uQ2VsbC5jbGFzc05hbWUgPSAnc2YtYWpheC1yZXF1ZXN0LWR1cmF0aW9uJzsKICAgICAgICAgICAgZHVyYXRpb25DZWxsLnRleHRDb250ZW50ID0gJ24vYSc7CiAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZChkdXJhdGlvbkNlbGwpOwoKICAgICAgICAgICAgcmVxdWVzdC5saXZlRHVyYXRpb25IYW5kbGUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIGR1cmF0aW9uQ2VsbC50ZXh0Q29udGVudCA9IChuZXcgRGF0ZSgpIC0gcmVxdWVzdC5zdGFydCkgKyAnIG1zJzsKICAgICAgICAgICAgfSwgMTAwKTsKCiAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSAnc2YtYWpheC1yZXF1ZXN0IHNmLWFqYXgtcmVxdWVzdC1sb2FkaW5nJzsKICAgICAgICAgICAgdGJvZHkuaW5zZXJ0QmVmb3JlKHJvdywgbnVsbCk7CgogICAgICAgICAgICB2YXIgdG9vbGJhckluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1ibG9jay1hamF4IC5zZi10b29sYmFyLWluZm8nKTsKICAgICAgICAgICAgdG9vbGJhckluZm8uc2Nyb2xsVG9wID0gdG9vbGJhckluZm8uc2Nyb2xsSGVpZ2h0OwoKICAgICAgICAgICAgcmVuZGVyQWpheFJlcXVlc3RzKCk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGZpbmlzaEFqYXhSZXF1ZXN0ID0gZnVuY3Rpb24oaW5kZXgpIHsKICAgICAgICAgICAgdmFyIHJlcXVlc3QgPSByZXF1ZXN0U3RhY2tbaW5kZXhdOwogICAgICAgICAgICBjbGVhckludGVydmFsKHJlcXVlc3QubGl2ZUR1cmF0aW9uSGFuZGxlKTsKCiAgICAgICAgICAgIGlmICghcmVxdWVzdC5ET01Ob2RlKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChyZXF1ZXN0LnRvb2xiYXJSZXBsYWNlICYmICFyZXF1ZXN0LnRvb2xiYXJSZXBsYWNlRmluaXNoZWQgJiYgcmVxdWVzdC5wcm9maWxlKSB7CiAgICAgICAgICAgICAgICAvKiBGbGFnIGFzIGNvbXBsZXRlIGJlY2F1c2UgZmluaXNoQWpheFJlcXVlc3QgY2FuIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcy4gKi8KICAgICAgICAgICAgICAgIHJlcXVlc3QudG9vbGJhclJlcGxhY2VGaW5pc2hlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAvKiBTZWFyY2ggdXAgdGhyb3VnaCB0aGUgRE9NIHRvIGZpbmQgdGhlIHRvb2xiYXIncyBjb250YWluZXIgSUQuICovCiAgICAgICAgICAgICAgICBmb3IgKHZhciBlbGVtID0gcmVxdWVzdC5ET01Ob2RlOyBlbGVtICYmIGVsZW0gIT09IGRvY3VtZW50OyBlbGVtID0gZWxlbS5wYXJlbnROb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0uaWQubWF0Y2goL15zZndkdC8pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFNmanMubG9hZFRvb2xiYXIoZWxlbS5pZC5yZXBsYWNlKC9ec2Z3ZHQvLCAnJyksIHJlcXVlc3QucHJvZmlsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3RzLS07CiAgICAgICAgICAgIHZhciByb3cgPSByZXF1ZXN0LkRPTU5vZGU7CiAgICAgICAgICAgIC8qIFVucGFjayB0aGUgY2hpbGRyZW4gZnJvbSB0aGUgcm93ICovCiAgICAgICAgICAgIHZhciBwcm9maWxlckNlbGwgPSByb3cuY2hpbGRyZW5bMV07CiAgICAgICAgICAgIHZhciBtZXRob2RDZWxsID0gcm93LmNoaWxkcmVuWzJdOwogICAgICAgICAgICB2YXIgc3RhdHVzQ29kZUNlbGwgPSByb3cuY2hpbGRyZW5bNF07CiAgICAgICAgICAgIHZhciBzdGF0dXNDb2RlRWxlbSA9IHN0YXR1c0NvZGVDZWxsLmNoaWxkcmVuWzBdOwogICAgICAgICAgICB2YXIgZHVyYXRpb25DZWxsID0gcm93LmNoaWxkcmVuWzZdOwoKICAgICAgICAgICAgaWYgKHJlcXVlc3QuZXJyb3IpIHsKICAgICAgICAgICAgICAgIHJvdy5jbGFzc05hbWUgPSAnc2YtYWpheC1yZXF1ZXN0IHNmLWFqYXgtcmVxdWVzdC1lcnJvcic7CiAgICAgICAgICAgICAgICBtZXRob2RDZWxsLmNsYXNzTmFtZSA9ICdzZi1hamF4LXJlcXVlc3QtZXJyb3InOwogICAgICAgICAgICAgICAgc3VjY2Vzc1N0cmVhayA9IDA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gJ3NmLWFqYXgtcmVxdWVzdCBzZi1hamF4LXJlcXVlc3Qtb2snOwogICAgICAgICAgICAgICAgc3VjY2Vzc1N0cmVhaysrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXNDb2RlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXNDb2RlIDwgMzAwKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZUVsZW0uc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZi10b29sYmFyLXN0YXR1cycpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXF1ZXN0LnN0YXR1c0NvZGUgPCA0MDApIHsKICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlRWxlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NmLXRvb2xiYXItc3RhdHVzIHNmLXRvb2xiYXItc3RhdHVzLXllbGxvdycpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzdGF0dXNDb2RlRWxlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NmLXRvb2xiYXItc3RhdHVzIHNmLXRvb2xiYXItc3RhdHVzLXJlZCcpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc3RhdHVzQ29kZUVsZW0udGV4dENvbnRlbnQgPSByZXF1ZXN0LnN0YXR1c0NvZGU7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlRWxlbS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NmLXRvb2xiYXItc3RhdHVzIHNmLXRvb2xiYXItc3RhdHVzLXJlZCcpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocmVxdWVzdC5kdXJhdGlvbikgewogICAgICAgICAgICAgICAgZHVyYXRpb25DZWxsLnRleHRDb250ZW50ID0gcmVxdWVzdC5kdXJhdGlvbiArICcgbXMnOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocmVxdWVzdC5wcm9maWxlclVybCkgewogICAgICAgICAgICAgICAgcHJvZmlsZXJDZWxsLnRleHRDb250ZW50ID0gJyc7CiAgICAgICAgICAgICAgICB2YXIgcHJvZmlsZXJMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICAgICAgcHJvZmlsZXJMaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIHJlcXVlc3QucHJvZmlsZXJVcmwpOwogICAgICAgICAgICAgICAgcHJvZmlsZXJMaW5rLnRleHRDb250ZW50ID0gcmVxdWVzdC5wcm9maWxlOwogICAgICAgICAgICAgICAgcHJvZmlsZXJDZWxsLmFwcGVuZENoaWxkKHByb2ZpbGVyTGluayk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlbmRlckFqYXhSZXF1ZXN0cygpOwogICAgICAgIH07CgogICAgICAgICI7CiAgICAgICAgLy8gbGluZSAyOTIKICAgICAgICBpZiAoYXJyYXlfa2V5X2V4aXN0cygiZXhjbHVkZWRfYWpheF9wYXRocyIsICRjb250ZXh0KSkgewogICAgICAgICAgICAvLyBsaW5lIDI5MwogICAgICAgICAgICB5aWVsZCAiICAgICAgICAgICAgaWYgKHdpbmRvdy5mZXRjaCAmJiB3aW5kb3cuZmV0Y2gucG9seWZpbGwgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdmFyIG9sZEZldGNoID0gd2luZG93LmZldGNoOwogICAgICAgICAgICAgICAgd2luZG93LmZldGNoID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gb2xkRmV0Y2guYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gYXJndW1lbnRzWzBdOwogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHNbMV07CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtVHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudHNbMF0pOwogICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbVR5cGUgPT09ICdbb2JqZWN0IFJlcXVlc3RdJykgewogICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBhcmd1bWVudHNbMF0udXJsOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGFyZ3VtZW50c1swXS5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogYXJndW1lbnRzWzBdLmNyZWRlbnRpYWxzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogYXJndW1lbnRzWzBdLmhlYWRlcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlOiBhcmd1bWVudHNbMF0ubW9kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiBhcmd1bWVudHNbMF0ucmVkaXJlY3QKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBTdHJpbmcodXJsKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCF1cmwubWF0Y2gobmV3IFJlZ0V4cCgiOwogICAgICAgICAgICAvLyBsaW5lIDMxMgogICAgICAgICAgICB5aWVsZCBqc29uX2VuY29kZSgoaXNzZXQoJGNvbnRleHRbImV4Y2x1ZGVkX2FqYXhfcGF0aHMiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygiZXhjbHVkZWRfYWpheF9wYXRocyIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJleGNsdWRlZF9hamF4X3BhdGhzIl0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAiZXhjbHVkZWRfYWpheF9wYXRocyIgZG9lcyBub3QgZXhpc3QuJywgMzEyLCAkdGhpcy0+c291cmNlKTsgfSkoKSkpOwogICAgICAgICAgICB5aWVsZCAiKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1ldGhvZCA9ICdHRVQnOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5tZXRob2QgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gcGFyYW1zLm1ldGhvZDsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YWNrRWxlbWVudCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnZmV0Y2gnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IG5ldyBEYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSByZXF1ZXN0U3RhY2sucHVzaChzdGFja0VsZW1lbnQpIC0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQuZHVyYXRpb24gPSBuZXcgRGF0ZSgpIC0gc3RhY2tFbGVtZW50LnN0YXJ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LmVycm9yID0gci5zdGF0dXMgPCAyMDAgfHwgci5zdGF0dXMgPj0gNDAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnN0YXR1c0NvZGUgPSByLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5wcm9maWxlID0gci5oZWFkZXJzLmdldCgneC1kZWJ1Zy10b2tlbicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnByb2ZpbGVyVXJsID0gci5oZWFkZXJzLmdldCgneC1kZWJ1Zy10b2tlbi1saW5rJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQudG9vbGJhclJlcGxhY2VGaW5pc2hlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnRvb2xiYXJSZXBsYWNlID0gJzEnID09PSByLmhlYWRlcnMuZ2V0KCdTeW1mb255LURlYnVnLVRvb2xiYXItUmVwbGFjZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoQWpheFJlcXVlc3QoaWR4KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LmVycm9yID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaEFqYXhSZXF1ZXN0KGlkeCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBzdGFydEFqYXhSZXF1ZXN0KGlkeCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcikgewogICAgICAgICAgICAgICAgdmFyIHByb3hpZWQgPSBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbjsKCiAgICAgICAgICAgICAgICBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uKG1ldGhvZCwgdXJsLCBhc3luYywgdXNlciwgcGFzcykgewogICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgICAgICAgICAgICAgLyogcHJldmVudCBsb2dnaW5nIEFKQVggY2FsbHMgdG8gc3RhdGljIGFuZCBpbmxpbmUgZmlsZXMsIGxpa2UgdGVtcGxhdGVzICovCiAgICAgICAgICAgICAgICAgICAgdmFyIHBhdGggPSB1cmw7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVybC5zbGljZSgwLCAxKSA9PT0gJy8nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSB1cmwuaW5kZXhPZignIjsKICAgICAgICAgICAgLy8gbGluZSAzNTUKICAgICAgICAgICAgeWllbGQgJHRoaXMtPmVudi0+Z2V0UnVudGltZSgnVHdpZ1xSdW50aW1lXEVzY2FwZXJSdW50aW1lJyktPmVzY2FwZSgkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKENvcmVFeHRlbnNpb246OmdldEF0dHJpYnV0ZSgkdGhpcy0+ZW52LCAkdGhpcy0+c291cmNlLCAoaXNzZXQoJGNvbnRleHRbInJlcXVlc3QiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygicmVxdWVzdCIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJyZXF1ZXN0Il0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAicmVxdWVzdCIgZG9lcyBub3QgZXhpc3QuJywgMzU1LCAkdGhpcy0+c291cmNlKTsgfSkoKSksICJiYXNlUGF0aCIsIFtdLCAiYW55IiwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMzU1KSwgImpzIiksICJodG1sIiwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgICAgIHlpZWxkICInKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHVybC5zbGljZSgiOwogICAgICAgICAgICAvLyBsaW5lIDM1NgogICAgICAgICAgICB5aWVsZCAkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKFR3aWdcRXh0ZW5zaW9uXENvcmVFeHRlbnNpb246Omxlbmd0aCgkdGhpcy0+ZW52LT5nZXRDaGFyc2V0KCksIENvcmVFeHRlbnNpb246OmdldEF0dHJpYnV0ZSgkdGhpcy0+ZW52LCAkdGhpcy0+c291cmNlLCAoaXNzZXQoJGNvbnRleHRbInJlcXVlc3QiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygicmVxdWVzdCIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJyZXF1ZXN0Il0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAicmVxdWVzdCIgZG9lcyBub3QgZXhpc3QuJywgMzU2LCAkdGhpcy0+c291cmNlKTsgfSkoKSksICJiYXNlUGF0aCIsIFtdLCAiYW55IiwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMzU2KSksICJodG1sIiwgbnVsbCwgdHJ1ZSk7CiAgICAgICAgICAgIHlpZWxkICIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKDAgPT09IHVybC5pbmRleE9mKCciOwogICAgICAgICAgICAvLyBsaW5lIDM1OQogICAgICAgICAgICB5aWVsZCAkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKCR0aGlzLT5lbnYtPmdldFJ1bnRpbWUoJ1R3aWdcUnVudGltZVxFc2NhcGVyUnVudGltZScpLT5lc2NhcGUoKENvcmVFeHRlbnNpb246OmdldEF0dHJpYnV0ZSgkdGhpcy0+ZW52LCAkdGhpcy0+c291cmNlLCAoaXNzZXQoJGNvbnRleHRbInJlcXVlc3QiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygicmVxdWVzdCIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJyZXF1ZXN0Il0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAicmVxdWVzdCIgZG9lcyBub3QgZXhpc3QuJywgMzU5LCAkdGhpcy0+c291cmNlKTsgfSkoKSksICJzY2hlbWVBbmRIdHRwSG9zdCIsIFtdLCAiYW55IiwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMzU5KSAuIENvcmVFeHRlbnNpb246OmdldEF0dHJpYnV0ZSgkdGhpcy0+ZW52LCAkdGhpcy0+c291cmNlLCAoaXNzZXQoJGNvbnRleHRbInJlcXVlc3QiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygicmVxdWVzdCIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJyZXF1ZXN0Il0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAicmVxdWVzdCIgZG9lcyBub3QgZXhpc3QuJywgMzU5LCAkdGhpcy0+c291cmNlKTsgfSkoKSksICJiYXNlUGF0aCIsIFtdLCAiYW55IiwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMzU5KSksICJqcyIpLCAiaHRtbCIsIG51bGwsIHRydWUpOwogICAgICAgICAgICB5aWVsZCAiJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHVybC5zbGljZSgiOwogICAgICAgICAgICAvLyBsaW5lIDM2MAogICAgICAgICAgICB5aWVsZCAkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKFR3aWdcRXh0ZW5zaW9uXENvcmVFeHRlbnNpb246Omxlbmd0aCgkdGhpcy0+ZW52LT5nZXRDaGFyc2V0KCksIChDb3JlRXh0ZW5zaW9uOjpnZXRBdHRyaWJ1dGUoJHRoaXMtPmVudiwgJHRoaXMtPnNvdXJjZSwgKGlzc2V0KCRjb250ZXh0WyJyZXF1ZXN0Il0pIHx8IGFycmF5X2tleV9leGlzdHMoInJlcXVlc3QiLCAkY29udGV4dCkgPyAkY29udGV4dFsicmVxdWVzdCJdIDogKGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcignVmFyaWFibGUgInJlcXVlc3QiIGRvZXMgbm90IGV4aXN0LicsIDM2MCwgJHRoaXMtPnNvdXJjZSk7IH0pKCkpLCAic2NoZW1lQW5kSHR0cEhvc3QiLCBbXSwgImFueSIsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDM2MCkgLiBDb3JlRXh0ZW5zaW9uOjpnZXRBdHRyaWJ1dGUoJHRoaXMtPmVudiwgJHRoaXMtPnNvdXJjZSwgKGlzc2V0KCRjb250ZXh0WyJyZXF1ZXN0Il0pIHx8IGFycmF5X2tleV9leGlzdHMoInJlcXVlc3QiLCAkY29udGV4dCkgPyAkY29udGV4dFsicmVxdWVzdCJdIDogKGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IFJ1bnRpbWVFcnJvcignVmFyaWFibGUgInJlcXVlc3QiIGRvZXMgbm90IGV4aXN0LicsIDM2MCwgJHRoaXMtPnNvdXJjZSk7IH0pKCkpLCAiYmFzZVBhdGgiLCBbXSwgImFueSIsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIDM2MCkpKSwgImh0bWwiLCBudWxsLCB0cnVlKTsKICAgICAgICAgICAgeWllbGQgIik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoIXBhdGgubWF0Y2gobmV3IFJlZ0V4cCgiOwogICAgICAgICAgICAvLyBsaW5lIDM2MwogICAgICAgICAgICB5aWVsZCBqc29uX2VuY29kZSgoaXNzZXQoJGNvbnRleHRbImV4Y2x1ZGVkX2FqYXhfcGF0aHMiXSkgfHwgYXJyYXlfa2V5X2V4aXN0cygiZXhjbHVkZWRfYWpheF9wYXRocyIsICRjb250ZXh0KSA/ICRjb250ZXh0WyJleGNsdWRlZF9hamF4X3BhdGhzIl0gOiAoZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgUnVudGltZUVycm9yKCdWYXJpYWJsZSAiZXhjbHVkZWRfYWpheF9wYXRocyIgZG9lcyBub3QgZXhpc3QuJywgMzYzLCAkdGhpcy0+c291cmNlKTsgfSkoKSkpOwogICAgICAgICAgICB5aWVsZCAiKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YWNrRWxlbWVudCA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAneGhyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBuZXcgRGF0ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gcmVxdWVzdFN0YWNrLnB1c2goc3RhY2tFbGVtZW50KSAtIDE7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ3JlYWR5c3RhdGVjaGFuZ2UnLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLnJlYWR5U3RhdGUgPT0gNCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5kdXJhdGlvbiA9IG5ldyBEYXRlKCkgLSBzdGFja0VsZW1lbnQuc3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LmVycm9yID0gc2VsZi5zdGF0dXMgPCAyMDAgfHwgc2VsZi5zdGF0dXMgPj0gNDAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5zdGF0dXNDb2RlID0gc2VsZi5zdGF0dXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdEhlYWRlcnMoc2VsZiwgc3RhY2tFbGVtZW50KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoQWpheFJlcXVlc3QoaWR4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRBamF4UmVxdWVzdChpZHgpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcHJveGllZC5hcHBseSh0aGlzLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpKTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KICAgICAgICAiOwogICAgICAgIH0KICAgICAgICAvLyBsaW5lIDM5MgogICAgICAgIHlpZWxkICIKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBoYXNDbGFzczogaGFzQ2xhc3MsCgogICAgICAgICAgICByZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsCgogICAgICAgICAgICBhZGRDbGFzczogYWRkQ2xhc3MsCgogICAgICAgICAgICB0b2dnbGVDbGFzczogdG9nZ2xlQ2xhc3MsCgogICAgICAgICAgICBnZXRQcmVmZXJlbmNlOiBnZXRQcmVmZXJlbmNlLAoKICAgICAgICAgICAgc2V0UHJlZmVyZW5jZTogc2V0UHJlZmVyZW5jZSwKCiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXI6IGFkZEV2ZW50TGlzdGVuZXIsCgogICAgICAgICAgICByZXF1ZXN0OiByZXF1ZXN0LAoKICAgICAgICAgICAgcmVuZGVyQWpheFJlcXVlc3RzOiByZW5kZXJBamF4UmVxdWVzdHMsCgogICAgICAgICAgICBnZXRTZndkdDogZnVuY3Rpb24odG9rZW4pIHsKICAgICAgICAgICAgICAgIGlmICghdGhpcy5zZndkdCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2Z3ZHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Z3ZHQnICsgdG9rZW4pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNmd2R0OwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbG9hZDogZnVuY3Rpb24oc2VsZWN0b3IsIHVybCwgb25TdWNjZXNzLCBvbkVycm9yLCBvcHRpb25zKSB7CiAgICAgICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcik7CgogICAgICAgICAgICAgICAgaWYgKGVsICYmIGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zZnVybCcpICE9PSB1cmwpIHsKICAgICAgICAgICAgICAgICAgICByZXF1ZXN0KAogICAgICAgICAgICAgICAgICAgICAgICB1cmwsCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHhocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0geGhyLnJlc3BvbnNlVGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1zZnVybCcsIHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhlbCwgJ2xvYWRpbmcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwZW5kaW5nID0gcGVuZGluZ1JlcXVlc3RzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXF1ZXN0U3RhY2subGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydEFqYXhSZXF1ZXN0KGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0U3RhY2tbaV0uZHVyYXRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluaXNoQWpheFJlcXVlc3QoaSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmV2ZXJ0IHRoZSBwZW5kaW5nIHN0YXRlIGluIGNhc2UgdGhlcmUgd2FzIGEgc3RhcnQgY2FsbGVkIHdpdGhvdXQgYSBmaW5pc2ggYWJvdmUuICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUmVxdWVzdHMgPSBwZW5kaW5nOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgKG9uU3VjY2VzcyB8fCBub29wKSh4aHIsIGVsKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oeGhyKSB7IChvbkVycm9yIHx8IG5vb3ApKHhociwgZWwpOyB9LAogICAgICAgICAgICAgICAgICAgICAgICAnJywKICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucwogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBzaG93VG9vbGJhcjogZnVuY3Rpb24odG9rZW4pIHsKICAgICAgICAgICAgICAgIHZhciBzZndkdCA9IHRoaXMuZ2V0U2Z3ZHQodG9rZW4pOwogICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3Moc2Z3ZHQsICdzZi1kaXNwbGF5LW5vbmUnKTsKCiAgICAgICAgICAgICAgICBpZiAoZ2V0UHJlZmVyZW5jZSgndG9vbGJhci9kaXNwbGF5U3RhdGUnKSA9PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyTWFpbkNvbnRlbnQtJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJDbGVhcmVyLScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZNaW5pVG9vbGJhci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyTWFpbkNvbnRlbnQtJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyQ2xlYXJlci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZk1pbmlUb29sYmFyLScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGhpZGVUb29sYmFyOiBmdW5jdGlvbih0b2tlbikgewogICAgICAgICAgICAgICAgdmFyIHNmd2R0ID0gdGhpcy5nZXRTZndkdCh0b2tlbik7CiAgICAgICAgICAgICAgICBhZGRDbGFzcyhzZndkdCwgJ3NmLWRpc3BsYXktbm9uZScpOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgaW5pdFRvb2xiYXI6IGZ1bmN0aW9uKHRva2VuKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dUb29sYmFyKHRva2VuKTsKCiAgICAgICAgICAgICAgICB2YXIgaGlkZUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJIaWRlQnV0dG9uLScgKyB0b2tlbik7CiAgICAgICAgICAgICAgICB2YXIgaGlkZUJ1dHRvblN2ZyA9IGhpZGVCdXR0b24ucXVlcnlTZWxlY3Rvcignc3ZnJyk7CiAgICAgICAgICAgICAgICBoaWRlQnV0dG9uU3ZnLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpOwogICAgICAgICAgICAgICAgaGlkZUJ1dHRvblN2Zy5zZXRBdHRyaWJ1dGUoJ2ZvY3VzYWJsZScsICdmYWxzZScpOwogICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihoaWRlQnV0dG9uLCAnY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IHRoaXMucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICBwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgKHAucHJldmlvdXNFbGVtZW50U2libGluZyB8fCBwLnByZXZpb3VzU2libGluZykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZNaW5pVG9vbGJhci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgIHNldFByZWZlcmVuY2UoJ3Rvb2xiYXIvZGlzcGxheVN0YXRlJywgJ25vbmUnKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHZhciBzaG93QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1pbmlUb2dnbGVyLScgKyB0b2tlbik7CiAgICAgICAgICAgICAgICB2YXIgc2hvd0J1dHRvblN2ZyA9IHNob3dCdXR0b24ucXVlcnlTZWxlY3Rvcignc3ZnJyk7CiAgICAgICAgICAgICAgICBzaG93QnV0dG9uU3ZnLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpOwogICAgICAgICAgICAgICAgc2hvd0J1dHRvblN2Zy5zZXRBdHRyaWJ1dGUoJ2ZvY3VzYWJsZScsICdmYWxzZScpOwogICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihzaG93QnV0dG9uLCAnY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbSA9IHRoaXMucGFyZW50Tm9kZTsKICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbS5zdHlsZS5kaXNwbGF5ID09ICdub25lJykgewogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyTWFpbkNvbnRlbnQtJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyQ2xlYXJlci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1haW5Db250ZW50LScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJDbGVhcmVyLScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgc2V0UHJlZmVyZW5jZSgndG9vbGJhci9kaXNwbGF5U3RhdGUnLCAnYmxvY2snKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbG9hZFRvb2xiYXI6IGZ1bmN0aW9uKHRva2VuLCBuZXdUb2tlbikgewogICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICAgICAgICAgICAgdmFyIHRyaWVzQ291bnRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZkxvYWRDb3VudGVyLScgKyB0b2tlbik7CgogICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICAgICAgcmV0cnk6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgb25TZW5kOiBmdW5jdGlvbiAoY291bnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID09PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmluaXRUb29sYmFyKHRva2VuKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRyaWVzQ291bnRlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZXNDb3VudGVyLnRleHRDb250ZW50ID0gY291bnQ7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB2YXIgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmTG9hZENhbmNlbC0nICsgdG9rZW4pOwogICAgICAgICAgICAgICAgaWYgKGNhbmNlbEJ1dHRvbikgewogICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoY2FuY2VsQnV0dG9uLCAnY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3RvcCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuaGlkZVRvb2xiYXIodG9rZW4pOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG5ld1Rva2VuID0gKG5ld1Rva2VuIHx8IHRva2VuKTsKCiAgICAgICAgICAgICAgICB0aGlzLmxvYWQoCiAgICAgICAgICAgICAgICAgICAgJ3Nmd2R0JyArIHRva2VuLAogICAgICAgICAgICAgICAgICAgICciOwogICAgICAgIC8vIGxpbmUgNTQwCiAgICAgICAgeWllbGQgJHRoaXMtPmVudi0+Z2V0UnVudGltZSgnVHdpZ1xSdW50aW1lXEVzY2FwZXJSdW50aW1lJyktPmVzY2FwZSgkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKCR0aGlzLT5leHRlbnNpb25zWydTeW1mb255XEJyaWRnZVxUd2lnXEV4dGVuc2lvblxSb3V0aW5nRXh0ZW5zaW9uJ10tPmdldFVybCgiX3dkdCIsIFsidG9rZW4iID0+ICJ4eHh4eHgiXSksICJqcyIpLCAiaHRtbCIsIG51bGwsIHRydWUpOwogICAgICAgIHlpZWxkICInLnJlcGxhY2UoL3h4eHh4eC8sIG5ld1Rva2VuKSwKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih4aHIsIGVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8qIERvIG5vdGhpbmcgaW4gdGhlIGVkZ2UgY2FzZSB3aGVyZSB0aGUgdG9vbGJhciBoYXMgYWxyZWFkeSBiZWVuIHJlcGxhY2VkIHdpdGggYSBuZXcgb25lICovCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1haW5Db250ZW50LScgKyBuZXdUb2tlbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLyogRXZhbHVhdGUgaW4gZ2xvYmFsIHNjb3BlIHNjcmlwdHMgZW1iZWRkZWQgaW5zaWRlIHRoZSB0b29sYmFyICovCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpLCBzY3JpcHRzID0gW10uc2xpY2UuY2FsbChlbC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzY3JpcHRzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NyaXB0c1tpXS5maXJzdENoaWxkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZhbC5jYWxsKHt9LCBzY3JpcHRzW2ldLmZpcnN0Q2hpbGQubm9kZVZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IC0xICE9PSB4aHIucmVzcG9uc2VUZXh0LmluZGV4T2YoJ3NmLXRvb2xiYXJyZXNldCcpID8gJ2Jsb2NrJyA6ICdub25lJzsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbC5zdHlsZS5kaXNwbGF5ID09ICdub25lJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmluaXRUb29sYmFyKG5ld1Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEhhbmRsZSB0b29sYmFyLWluZm8gcG9zaXRpb24gKi8KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvb2xiYXJCbG9ja3MgPSBbXS5zbGljZS5jYWxsKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZi10b29sYmFyLWJsb2NrJykpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdG9vbGJhckJsb2Nrcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckJsb2Nrc1tpXS5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9vbGJhckluZm8gPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZi10b29sYmFyLWluZm8nKVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZVdpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudFdpZHRoID0gdG9vbGJhckluZm8ub2Zmc2V0V2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnRWYWx1ZSA9IChlbGVtZW50V2lkdGggKyB0aGlzLm9mZnNldExlZnQpIC0gcGFnZVdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByaWdodFZhbHVlID0gKGVsZW1lbnRXaWR0aCArIChwYWdlV2lkdGggLSB0aGlzLm9mZnNldExlZnQpKSAtIHBhZ2VXaWR0aDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVzZXQgcmlnaHQgYW5kIGxlZnQgdmFsdWUsIHVzZWZ1bCBvbiB3aW5kb3cgcmVzaXplICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckluZm8uc3R5bGUucmlnaHQgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySW5mby5zdHlsZS5sZWZ0ID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50V2lkdGggPiBwYWdlV2lkdGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckluZm8uc3R5bGUubGVmdCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxlZnRWYWx1ZSA+IDAgJiYgcmlnaHRWYWx1ZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckluZm8uc3R5bGUucmlnaHQgPSAocmlnaHRWYWx1ZSAqIC0xKSArICdweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsZWZ0VmFsdWUgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJbmZvLnN0eWxlLmxlZnQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJbmZvLnN0eWxlLnJpZ2h0ID0gJzBweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQWpheFJlcXVlc3RzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNmLXRvb2xiYXItYWpheC1jbGVhcicpLCAnY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RTdGFjayA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQWpheFJlcXVlc3RzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzU3RyZWFrID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWFqYXgtcmVxdWVzdC1saXN0JykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWJsb2NrLWFqYXgnKSwgJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNmLXRvb2xiYXItYmxvY2stYWpheCAuc2YtdG9vbGJhci1pbmZvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnNjcm9sbFRvcCA9IGVsZW0uc2Nyb2xsSGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1ibG9jay1hamF4ID4gLnNmLXRvb2xiYXItaWNvbicpLCAnY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3ModGhpcy5wYXJlbnROb2RlLCAnaG92ZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHVtcEluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1ibG9jay1kdW1wIC5zZi10b29sYmFyLWluZm8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGR1bXBJbmZvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGR1bXBJbmZvLCAnc2ZiZWZvcmVkdW1wY29sbGFwc2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVtcEluZm8uc3R5bGUubWluSGVpZ2h0ID0gZHVtcEluZm8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KydweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZHVtcEluZm8sICdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1bXBJbmZvLnN0eWxlLm1pbkhlaWdodCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHhocikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMCAmJiAhb3B0aW9ucy5zdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Z3ZHQgPSB0aGF0LmdldFNmd2R0KHRva2VuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNmd2R0LmlubmVySFRNTCA9ICdcXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZi10b29sYmFycmVzZXRcIj5cXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2YtdG9vbGJhci1pY29uXCI+PHN2ZyB3aWR0aD1cIjI2XCIgaGVpZ2h0PVwiMjhcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmVyc2lvbj1cIjEuMVwiIHg9XCIwcHhcIiB5PVwiMHB4XCIgdmlld0JveD1cIjAgMCAyNiAyOFwiIGVuYWJsZS1iYWNrZ3JvdW5kPVwibmV3IDAgMCAyNiAyOFwiIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+PHBhdGggZmlsbD1cIiNGRkZGRkZcIiBkPVwiTTEzIDBDNS44IDAgMCA1LjggMCAxM2MwIDcuMiA1LjggMTMgMTMgMTNjNy4yIDAgMTMtNS44IDEzLTEzQzI2IDUuOCAyMC4yIDAgMTMgMHogTTIwIDcuNSBjLTAuNiAwLTEtMC4zLTEtMC45YzAtMC4yIDAtMC40IDAuMi0wLjZjMC4xLTAuMyAwLjItMC4zIDAuMi0wLjRjMC0wLjMtMC41LTAuNC0wLjctMC40Yy0yIDAuMS0yLjUgMi43LTIuOSA0LjhsLTAuMiAxLjEgYzEuMSAwLjIgMS45IDAgMi40LTAuM2MwLjYtMC40LTAuMi0wLjgtMC4xLTEuM0MxOCA5LjIgMTguNCA5IDE4LjcgOC45YzAuNSAwIDAuOCAwLjUgMC44IDFjMCAwLjgtMS4xIDItMy4zIDEuOSBjLTAuMyAwLTAuNSAwLTAuNy0wLjFMMTUgMTQuMWMtMC40IDEuNy0wLjkgNC4xLTIuNiA2LjJjLTEuNSAxLjgtMy4xIDIuMS0zLjggMi4xYy0xLjMgMC0yLjEtMC42LTIuMi0xLjZjMC0wLjkgMC44LTEuNCAxLjMtMS40IGMwLjcgMCAxLjIgMC41IDEuMiAxLjFjMCAwLjUtMC4yIDAuNi0wLjQgMC43Yy0wLjEgMC4xLTAuMyAwLjItMC4zIDAuNGMwIDAuMSAwLjEgMC4zIDAuNCAwLjNjMC41IDAgMC45LTAuMyAxLjItMC41IGMxLjMtMSAxLjctMi45IDIuNC02LjJsMC4xLTAuOGMwLjItMS4xIDAuNS0yLjMgMC44LTMuNWMtMC45LTAuNy0xLjQtMS41LTIuNi0xLjhjLTAuOC0wLjItMS4zIDAtMS43IDAuNEM4LjQgMTAgOC42IDEwLjcgOSAxMS4xIGwwLjcgMC43YzAuOCAwLjkgMS4zIDEuNyAxLjEgMi43Yy0wLjMgMS42LTIuMSAyLjgtNC4zIDIuMWMtMS45LTAuNi0yLjItMS45LTItMi43YzAuMi0wLjYgMC43LTAuOCAxLjItMC42IGMwLjUgMC4yIDAuNyAwLjggMC42IDEuM2MwIDAuMSAwIDAuMS0wLjEgMC4zQzYgMTUgNS45IDE1LjIgNS45IDE1LjNjLTAuMSAwLjQgMC40IDAuNyAwLjggMC44YzAuOCAwLjMgMS43LTAuMiAxLjktMC45IGMwLjItMC42LTAuMi0xLjEtMC40LTEuMmwtMC44LTAuOWMtMC40LTAuNC0xLjItMS41LTAuOC0yLjhjMC4yLTAuNSAwLjUtMSAwLjktMS40YzEtMC43IDItMC44IDMtMC42YzEuMyAwLjQgMS45IDEuMiAyLjggMS45IGMwLjUtMS4zIDEuMS0yLjYgMi0zLjhjMC45LTEgMi0xLjcgMy4zLTEuOEMyMCA0LjggMjEgNS40IDIxIDYuM0MyMSA2LjcgMjAuOCA3LjUgMjAgNy41elwiLz48L3N2Zz48L2Rpdj5cXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBsb2FkaW5nIHRoZSB3ZWIgZGVidWcgdG9vbGJhci4gPGEgaHJlZj1cIiI7CiAgICAgICAgLy8gbGluZSA2MjMKICAgICAgICB5aWVsZCAkdGhpcy0+ZW52LT5nZXRSdW50aW1lKCdUd2lnXFJ1bnRpbWVcRXNjYXBlclJ1bnRpbWUnKS0+ZXNjYXBlKCR0aGlzLT5lbnYtPmdldFJ1bnRpbWUoJ1R3aWdcUnVudGltZVxFc2NhcGVyUnVudGltZScpLT5lc2NhcGUoJHRoaXMtPmV4dGVuc2lvbnNbJ1N5bWZvbnlcQnJpZGdlXFR3aWdcRXh0ZW5zaW9uXFJvdXRpbmdFeHRlbnNpb24nXS0+Z2V0VXJsKCJfcHJvZmlsZXJfaG9tZSIpLCAianMiKSwgImh0bWwiLCBudWxsLCB0cnVlKTsKICAgICAgICB5aWVsZCAiJyArIG5ld1Rva2VuICsgJ1wiPk9wZW4gdGhlIHdlYiBwcm9maWxlci48L2E+XFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNmd2R0LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2YtdG9vbGJhciBzZi1lcnJvci10b29sYmFyJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9wdGlvbnMKICAgICAgICAgICAgICAgICk7CgogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICB0b2dnbGU6IGZ1bmN0aW9uKHNlbGVjdG9yLCBlbE9uLCBlbE9mZikgewogICAgICAgICAgICAgICAgdmFyIHRtcCA9IGVsT24uc3R5bGUuZGlzcGxheSwKICAgICAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdG9yKTsKCiAgICAgICAgICAgICAgICBlbE9uLnN0eWxlLmRpc3BsYXkgPSBlbE9mZi5zdHlsZS5kaXNwbGF5OwogICAgICAgICAgICAgICAgZWxPZmYuc3R5bGUuZGlzcGxheSA9IHRtcDsKCiAgICAgICAgICAgICAgICBpZiAoZWwpIHsKICAgICAgICAgICAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnID09PSB0bXAgPyAnbm9uZScgOiAnYmxvY2snOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgY3JlYXRlVGFiczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgdGFiR3JvdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNmLXRhYnM6bm90KFtkYXRhLXByb2Nlc3NlZD10cnVlXSknKTsKCiAgICAgICAgICAgICAgICAvKiBjcmVhdGUgdGhlIHRhYiBuYXZpZ2F0aW9uIGZvciBlYWNoIGdyb3VwIG9mIHRhYnMgKi8KICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFiR3JvdXBzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRhYnMgPSB0YWJHcm91cHNbaV0ucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLnRhYicpOwogICAgICAgICAgICAgICAgICAgIHZhciB0YWJOYXZpZ2F0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTsKICAgICAgICAgICAgICAgICAgICB0YWJOYXZpZ2F0aW9uLmNsYXNzTmFtZSA9ICd0YWItbmF2aWdhdGlvbic7CgogICAgICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFRhYklkID0gJ3RhYi0nICsgaSArICctMCc7IC8qIHNlbGVjdCB0aGUgZmlyc3QgdGFiIGJ5IGRlZmF1bHQgKi8KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRhYnMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhYklkID0gJ3RhYi0nICsgaSArICctJyArIGo7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJUaXRsZSA9IHRhYnNbal0ucXVlcnlTZWxlY3RvcignLnRhYi10aXRsZScpLmlubmVySFRNTDsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJOYXZpZ2F0aW9uSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhYk5hdmlnYXRpb25JdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS10YWItaWQnLCB0YWJJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNDbGFzcyh0YWJzW2pdLCAnYWN0aXZlJykpIHsgc2VsZWN0ZWRUYWJJZCA9IHRhYklkOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNDbGFzcyh0YWJzW2pdLCAnZGlzYWJsZWQnKSkgeyBhZGRDbGFzcyh0YWJOYXZpZ2F0aW9uSXRlbSwgJ2Rpc2FibGVkJyk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgdGFiTmF2aWdhdGlvbkl0ZW0uaW5uZXJIVE1MID0gdGFiVGl0bGU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhYk5hdmlnYXRpb24uYXBwZW5kQ2hpbGQodGFiTmF2aWdhdGlvbkl0ZW0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhYkNvbnRlbnQgPSB0YWJzW2pdLnF1ZXJ5U2VsZWN0b3IoJy50YWItY29udGVudCcpOwogICAgICAgICAgICAgICAgICAgICAgICB0YWJDb250ZW50LnBhcmVudEVsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsIHRhYklkKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRhYkdyb3Vwc1tpXS5pbnNlcnRCZWZvcmUodGFiTmF2aWdhdGlvbiwgdGFiR3JvdXBzW2ldLmZpcnN0Q2hpbGQpOwogICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRhYi1pZD1cIicgKyBzZWxlY3RlZFRhYklkICsgJ1wiXScpLCAnYWN0aXZlJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLyogZGlzcGxheSB0aGUgYWN0aXZlIHRhYiBhbmQgYWRkIHRoZSAnY2xpY2snIGV2ZW50IGxpc3RlbmVycyAqLwogICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRhYkdyb3Vwcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHRhYk5hdmlnYXRpb24gPSB0YWJHcm91cHNbaV0ucXVlcnlTZWxlY3RvckFsbCgnOnNjb3BlID4gLnRhYi1uYXZpZ2F0aW9uIGxpJyk7CgogICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCB0YWJOYXZpZ2F0aW9uLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhYklkID0gdGFiTmF2aWdhdGlvbltqXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFiLWlkJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYklkKS5xdWVyeVNlbGVjdG9yKCcudGFiLXRpdGxlJykuY2xhc3NOYW1lID0gJ2hpZGRlbic7CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzQ2xhc3ModGFiTmF2aWdhdGlvbltqXSwgJ2FjdGl2ZScpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWJJZCkuY2xhc3NOYW1lID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYklkKS5jbGFzc05hbWUgPSAnaGlkZGVuJzsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdGFiTmF2aWdhdGlvbltqXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmVUYWIgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogbmVlZGVkIGJlY2F1c2Ugd2hlbiB0aGUgdGFiIGNvbnRhaW5zIEhUTUwgY29udGVudHMsIHVzZXIgY2FuIGNsaWNrICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBvbiBhbnkgb2YgdGhvc2UgZWxlbWVudHMgaW5zdGVhZCBvZiB0aGVpciBwYXJlbnQgJzxsaT4nIGVsZW1lbnQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChhY3RpdmVUYWIudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnbGknKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiID0gYWN0aXZlVGFiLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZ2V0IHRoZSBmdWxsIGxpc3Qgb2YgdGFicyB0aHJvdWdoIHRoZSBwYXJlbnQgb2YgdGhlIGFjdGl2ZSB0YWIgZWxlbWVudCAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhYk5hdmlnYXRpb24gPSBhY3RpdmVUYWIucGFyZW50Tm9kZS5jaGlsZHJlbjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGFiTmF2aWdhdGlvbi5sZW5ndGg7IGsrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJJZCA9IHRhYk5hdmlnYXRpb25ba10uZ2V0QXR0cmlidXRlKCdkYXRhLXRhYi1pZCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYklkKS5jbGFzc05hbWUgPSAnaGlkZGVuJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyh0YWJOYXZpZ2F0aW9uW2tdLCAnYWN0aXZlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3MoYWN0aXZlVGFiLCAnYWN0aXZlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlVGFiSWQgPSBhY3RpdmVUYWIuZ2V0QXR0cmlidXRlKCdkYXRhLXRhYi1pZCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYWN0aXZlVGFiSWQpLmNsYXNzTmFtZSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdGFiR3JvdXBzW2ldLnNldEF0dHJpYnV0ZSgnZGF0YS1wcm9jZXNzZWQnLCAndHJ1ZScpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgY3JlYXRlVG9nZ2xlczogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZi10b2dnbGU6bm90KFtkYXRhLXByb2Nlc3NlZD10cnVlXSknKTsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvZ2dsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudFNlbGVjdG9yID0gdG9nZ2xlc1tpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9nZ2xlLXNlbGVjdG9yJyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsZW1lbnRTZWxlY3Rvcik7CgogICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKGVsZW1lbnQsICdzZi10b2dnbGUtY29udGVudCcpOwoKICAgICAgICAgICAgICAgICAgICBpZiAodG9nZ2xlc1tpXS5oYXNBdHRyaWJ1dGUoJ2RhdGEtdG9nZ2xlLWluaXRpYWwnKSAmJiB0b2dnbGVzW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS10b2dnbGUtaW5pdGlhbCcpID09ICdkaXNwbGF5JykgewogICAgICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyh0b2dnbGVzW2ldLCAnc2YtdG9nZ2xlLW9uJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKGVsZW1lbnQsICdzZi10b2dnbGUtdmlzaWJsZScpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKHRvZ2dsZXNbaV0sICdzZi10b2dnbGUtb2ZmJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKGVsZW1lbnQsICdzZi10b2dnbGUtaGlkZGVuJyk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKHRvZ2dsZXNbaV0sICdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCcnICE9PSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogRG9uJ3QgZG8gYW55dGhpbmcgb24gdGV4dCBzZWxlY3Rpb24gKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvZ2dsZSA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIG5lZWRlZCBiZWNhdXNlIHdoZW4gdGhlIHRvZ2dsZSBjb250YWlucyBIVE1MIGNvbnRlbnRzLCB1c2VyIGNhbiBjbGljayAqLwogICAgICAgICAgICAgICAgICAgICAgICAvKiBvbiBhbnkgb2YgdGhvc2UgZWxlbWVudHMgaW5zdGVhZCBvZiB0aGVpciBwYXJlbnQgJy5zZi10b2dnbGUnIGVsZW1lbnQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCFoYXNDbGFzcyh0b2dnbGUsICdzZi10b2dnbGUnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlID0gdG9nZ2xlLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0b2dnbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZ2dsZS1zZWxlY3RvcicpKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKHRvZ2dsZSwgJ3NmLXRvZ2dsZS1vbicpOwogICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyh0b2dnbGUsICdzZi10b2dnbGUtb2ZmJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGVsZW1lbnQsICdzZi10b2dnbGUtaGlkZGVuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZUNsYXNzKGVsZW1lbnQsICdzZi10b2dnbGUtdmlzaWJsZScpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLyogdGhlIHRvZ2dsZSBkb2Vzbid0IGNoYW5nZSBpdHMgY29udGVudHMgd2hlbiBjbGlja2luZyBvbiBpdCAqLwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRvZ2dsZS5oYXNBdHRyaWJ1dGUoJ2RhdGEtdG9nZ2xlLWFsdC1jb250ZW50JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b2dnbGUuaGFzQXR0cmlidXRlKCdkYXRhLXRvZ2dsZS1vcmlnaW5hbC1jb250ZW50JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9nZ2xlLW9yaWdpbmFsLWNvbnRlbnQnLCB0b2dnbGUuaW5uZXJIVE1MKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRDb250ZW50ID0gdG9nZ2xlLmlubmVySFRNTDsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9yaWdpbmFsQ29udGVudCA9IHRvZ2dsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9nZ2xlLW9yaWdpbmFsLWNvbnRlbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFsdENvbnRlbnQgPSB0b2dnbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZ2dsZS1hbHQtY29udGVudCcpOwogICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGUuaW5uZXJIVE1MID0gY3VycmVudENvbnRlbnQgIT09IGFsdENvbnRlbnQgPyBhbHRDb250ZW50IDogb3JpZ2luYWxDb250ZW50OwogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAvKiBQcmV2ZW50cyBmcm9tIGRpc2FsbG93aW5nIGNsaWNrcyBvbiBsaW5rcyBpbnNpZGUgdG9nZ2xlcyAqLwogICAgICAgICAgICAgICAgICAgIHZhciB0b2dnbGVMaW5rcyA9IHRvZ2dsZXNbaV0ucXVlcnlTZWxlY3RvckFsbCgnYScpOwogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdG9nZ2xlTGlua3MubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcih0b2dnbGVMaW5rc1tqXSwgJ2NsaWNrJywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvKiBQcmV2ZW50cyBmcm9tIGRpc2FsbG93aW5nIGNsaWNrcyBvbiBcImNvcHkgdG8gY2xpcGJvYXJkXCIgZWxlbWVudHMgaW5zaWRlIHRvZ2dsZXMgKi8KICAgICAgICAgICAgICAgICAgICB2YXIgY29weVRvQ2xpcGJvYXJkRWxlbWVudHMgPSB0b2dnbGVzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NwYW5bZGF0YS1jbGlwYm9hcmQtdGV4dF0nKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGNvcHlUb0NsaXBib2FyZEVsZW1lbnRzLmxlbmd0aDsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoY29weVRvQ2xpcGJvYXJkRWxlbWVudHNba10sICdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlc1tpXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvY2Vzc2VkJywgJ3RydWUnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGluaXRpYWxpemVMb2dzVGFibGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgU2Zqcy51cGRhdGVMb2dzVGFibGUoKTsKCiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubG9nLWZpbHRlciBpbnB1dCcpLmZvckVhY2goKGlucHV0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4geyBTZmpzLnVwZGF0ZUxvZ3NUYWJsZSgpOyB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maWx0ZXItc2VsZWN0LWFsbC1vci1ub25lIGJ1dHRvbicpLmZvckVhY2goKGxpbmspID0+IHsKICAgICAgICAgICAgICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RBbGwgPSBsaW5rLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0LWFsbCcpOwogICAgICAgICAgICAgICAgICAgICAgICBsaW5rLmNsb3Nlc3QoJy5sb2ctZmlsdGVyLWNvbnRlbnQnKS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goKGlucHV0KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5jaGVja2VkID0gc2VsZWN0QWxsOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIFNmanMudXBkYXRlTG9nc1RhYmxlKCk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnZGV0YWlscy5sb2ctZmlsdGVyJykuZm9yRWFjaCgoZmlsdGVyRWxlbWVudCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlckVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSAmJiBmaWx0ZXJFbGVtZW50Lm9wZW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlckVsZW1lbnQub3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHVwZGF0ZUxvZ3NUYWJsZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZFR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9nLWZpbHRlci10eXBlIGlucHV0OmNoZWNrZWQnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGNvbnN0IHByaW9yaXRpZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbG9nLWZpbHRlci1wcmlvcml0eSBpbnB1dCcpOwogICAgICAgICAgICAgICAgY29uc3QgYWxsUHJpb3JpdGllcyA9IEFycmF5LmZyb20ocHJpb3JpdGllcykubWFwKChpbnB1dCkgPT4gaW5wdXQudmFsdWUpOwogICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRQcmlvcml0aWVzID0gQXJyYXkuZnJvbShwcmlvcml0aWVzKS5maWx0ZXIoKGlucHV0KSA9PiBpbnB1dC5jaGVja2VkKS5tYXAoKGlucHV0KSA9PiBpbnB1dC52YWx1ZSk7CiAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNsb2ctZmlsdGVyLWNoYW5uZWwgaW5wdXQnKTsKICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ2hhbm5lbHMgPSBBcnJheS5mcm9tKGNoYW5uZWxzKS5maWx0ZXIoKGlucHV0KSA9PiBpbnB1dC5jaGVja2VkKS5tYXAoKGlucHV0KSA9PiBpbnB1dC52YWx1ZSk7CgogICAgICAgICAgICAgICAgY29uc3QgbG9ncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlLmxvZ3MnKTsKICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBsb2dzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8qIGhpZGUgcm93cyB0aGF0IGRvbid0IG1hdGNoIHRoZSBjdXJyZW50IGZpbHRlcnMgKi8KICAgICAgICAgICAgICAgIGxldCBudW1WaXNpYmxlUm93cyA9IDA7CiAgICAgICAgICAgICAgICBsb2dzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3Rib2R5IHRyJykuZm9yRWFjaCgocm93KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCdhbGwnICE9PSBzZWxlY3RlZFR5cGUgJiYgc2VsZWN0ZWRUeXBlICE9PSByb3cuZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKSkgewogICAgICAgICAgICAgICAgICAgICAgICByb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpb3JpdHkgPSByb3cuZ2V0QXR0cmlidXRlKCdkYXRhLXByaW9yaXR5Jyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZhbHNlID09PSBzZWxlY3RlZFByaW9yaXRpZXMuaW5jbHVkZXMocHJpb3JpdHkpICYmIHRydWUgPT09IGFsbFByaW9yaXRpZXMuaW5jbHVkZXMocHJpb3JpdHkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoJycgIT09IHJvdy5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2hhbm5lbCcpICYmIGZhbHNlID09PSBzZWxlY3RlZENoYW5uZWxzLmluY2x1ZGVzKHJvdy5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2hhbm5lbCcpKSkgewogICAgICAgICAgICAgICAgICAgICAgICByb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JzsKICAgICAgICAgICAgICAgICAgICBudW1WaXNpYmxlUm93cysrOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGFibGUubG9ncycpLnN0eWxlLmRpc3BsYXkgPSAwID09PSBudW1WaXNpYmxlUm93cyA/ICdub25lJyA6ICd0YWJsZSc7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm8tbG9ncy1tZXNzYWdlJykuc3R5bGUuZGlzcGxheSA9IDAgPT09IG51bVZpc2libGVSb3dzID8gJ2Jsb2NrJyA6ICdub25lJzsKCiAgICAgICAgICAgICAgICAvKiB1cGRhdGUgdGhlIHNlbGVjdGVkIHRvdGFscyBvZiBhbGwgZmlsdGVycyAqLwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZy1maWx0ZXItcHJpb3JpdHkgLmZpbHRlci1hY3RpdmUtbnVtJykuaW5uZXJUZXh0ID0gKHByaW9yaXRpZXMubGVuZ3RoID09PSBzZWxlY3RlZFByaW9yaXRpZXMubGVuZ3RoKSA/ICdBbGwnIDogc2VsZWN0ZWRQcmlvcml0aWVzLmxlbmd0aDsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2ctZmlsdGVyLWNoYW5uZWwgLmZpbHRlci1hY3RpdmUtbnVtJykuaW5uZXJUZXh0ID0gKGNoYW5uZWxzLmxlbmd0aCA9PT0gc2VsZWN0ZWRDaGFubmVscy5sZW5ndGgpID8gJ0FsbCcgOiBzZWxlY3RlZENoYW5uZWxzLmxlbmd0aDsKCiAgICAgICAgICAgICAgICAvKiB1cGRhdGUgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBcImxvZyB0eXBlXCIgdGFiICovCiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbG9nLWZpbHRlci10eXBlIGxpJykuZm9yRWFjaCgodGFiKSA9PiB0YWIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI2xvZy1maWx0ZXItdHlwZSBpbnB1dFt2YWx1ZT1cIlwke3NlbGVjdGVkVHlwZX1cIl1gKS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgICAgICB9LAogICAgICAgIH07CiAgICB9KSgpOwoKICAgIFNmanMuYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwgJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHsKICAgICAgICBTZmpzLmNyZWF0ZVRhYnMoKTsKICAgICAgICBTZmpzLmNyZWF0ZVRvZ2dsZXMoKTsKICAgIH0pOwp9Ci8qXV0+Ki88L3NjcmlwdD4KIjsKICAgICAgICAKICAgICAgICAkX19pbnRlcm5hbF81YTI3YThiYTIxY2E3OWI2MTkzMjM3NmIyZmE5MjJkMi0+bGVhdmUoJF9faW50ZXJuYWxfNWEyN2E4YmEyMWNhNzliNjE5MzIzNzZiMmZhOTIyZDJfcHJvZik7CgogICAgICAgIAogICAgICAgICRfX2ludGVybmFsXzZmNDdiYmU5OTgzYWY4MWYxZTc0NTBlOWEzZTM3NjhmLT5sZWF2ZSgkX19pbnRlcm5hbF82ZjQ3YmJlOTk4M2FmODFmMWU3NDUwZTlhM2UzNzY4Zl9wcm9mKTsKCiAgICAgICAgeWllbGQgZnJvbSBbXTsKICAgIH0KCiAgICAvKioKICAgICAqIEBjb2RlQ292ZXJhZ2VJZ25vcmUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFRlbXBsYXRlTmFtZSgpOiBzdHJpbmcKICAgIHsKICAgICAgICByZXR1cm4gIkBXZWJQcm9maWxlci9Qcm9maWxlci9iYXNlX2pzLmh0bWwudHdpZyI7CiAgICB9CgogICAgLyoqCiAgICAgKiBAY29kZUNvdmVyYWdlSWdub3JlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBpc1RyYWl0YWJsZSgpOiBib29sCiAgICB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogQGNvZGVDb3ZlcmFnZUlnbm9yZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0RGVidWdJbmZvKCk6IGFycmF5CiAgICB7CiAgICAgICAgcmV0dXJuIGFycmF5ICggIDcwMSA9PiA2MjMsICA2MTUgPT4gNTQwLCAgNDY1ID0+IDM5MiwgIDQzMyA9PiAzNjMsICA0MjcgPT4gMzYwLCAgNDIzID0+IDM1OSwgIDQxNyA9PiAzNTYsICA0MTMgPT4gMzU1LCAgMzY3ID0+IDMxMiwgIDM0NiA9PiAyOTMsICAzNDQgPT4gMjkyLCAgNTcgPT4gNywgIDQ4ID0+IDMsKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0U291cmNlQ29udGV4dCgpOiBTb3VyY2UKICAgIHsKICAgICAgICByZXR1cm4gbmV3IFNvdXJjZSgieyMgVGhpcyBmaWxlIGlzIHBhcnRpYWxseSBkdXBsaWNhdGVkIGluIHNyYy9TeW1mb255L0NvbXBvbmVudC9FcnJvckhhbmRsZXIvUmVzb3VyY2VzL2Fzc2V0cy9qcy9leGNlcHRpb24uanMuCiAgIElmIHlvdSBtYWtlIGFueSBjaGFuZ2UgaW4gdGhpcyBmaWxlLCB2ZXJpZnkgdGhlIHNhbWUgY2hhbmdlIGlzIG5lZWRlZCBpbiB0aGUgb3RoZXIgZmlsZS4gI30KPHNjcmlwdHslIGlmIGNzcF9zY3JpcHRfbm9uY2UgaXMgZGVmaW5lZCBhbmQgY3NwX3NjcmlwdF9ub25jZSAlfSBub25jZT1cInt7IGNzcF9zY3JpcHRfbm9uY2UgfX1cInslIGVuZGlmICV9Pi8qPCFbQ0RBVEFbKi8KICAgIHsjIENhdXRpb246IHRoZSBjb250ZW50cyBvZiB0aGlzIGZpbGUgYXJlIHByb2Nlc3NlZCBieSBUd2lnIGJlZm9yZSBsb2FkaW5nCiAgICAgICAgICAgICAgICB0aGVtIGFzIEphdmFTY3JpcHQgc291cmNlIGNvZGUuIEFsd2F5cyB1c2UgJy8qJyBjb21tZW50cyBpbnN0ZWFkCiAgICAgICAgICAgICAgICBvZiAnLy8nIGNvbW1lbnRzIHRvIGF2b2lkIGltcG9zc2libGUtdG8tZGVidWcgc2lkZS1lZmZlY3RzICN9CgppZiAodHlwZW9mIFNmanMgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBTZmpzLmxvYWRUb29sYmFyID09PSAndW5kZWZpbmVkJykgewogICAgU2ZqcyA9IChmdW5jdGlvbigpIHsKICAgICAgICBcInVzZSBzdHJpY3RcIjsKCiAgICAgICAgaWYgKCdjbGFzc0xpc3QnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgewogICAgICAgICAgICB2YXIgaGFzQ2xhc3MgPSBmdW5jdGlvbiAoZWwsIGNzc0NsYXNzKSB7IHJldHVybiBlbC5jbGFzc0xpc3QuY29udGFpbnMoY3NzQ2xhc3MpOyB9OwogICAgICAgICAgICB2YXIgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbihlbCwgY3NzQ2xhc3MpIHsgZWwuY2xhc3NMaXN0LnJlbW92ZShjc3NDbGFzcyk7IH07CiAgICAgICAgICAgIHZhciBhZGRDbGFzcyA9IGZ1bmN0aW9uKGVsLCBjc3NDbGFzcykgeyBlbC5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzKTsgfTsKICAgICAgICAgICAgdmFyIHRvZ2dsZUNsYXNzID0gZnVuY3Rpb24oZWwsIGNzc0NsYXNzKSB7IGVsLmNsYXNzTGlzdC50b2dnbGUoY3NzQ2xhc3MpOyB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHZhciBoYXNDbGFzcyA9IGZ1bmN0aW9uIChlbCwgY3NzQ2xhc3MpIHsgcmV0dXJuIGVsLmNsYXNzTmFtZS5tYXRjaChuZXcgUmVnRXhwKCdcXFxcYicgKyBjc3NDbGFzcyArICdcXFxcYicpKTsgfTsKICAgICAgICAgICAgdmFyIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24oZWwsIGNzc0NsYXNzKSB7IGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJ1xcXFxiJyArIGNzc0NsYXNzICsgJ1xcXFxiJyksICcgJyk7IH07CiAgICAgICAgICAgIHZhciBhZGRDbGFzcyA9IGZ1bmN0aW9uKGVsLCBjc3NDbGFzcykgeyBpZiAoIWhhc0NsYXNzKGVsLCBjc3NDbGFzcykpIHsgZWwuY2xhc3NOYW1lICs9IFwiIFwiICsgY3NzQ2xhc3M7IH0gfTsKICAgICAgICAgICAgdmFyIHRvZ2dsZUNsYXNzID0gZnVuY3Rpb24oZWwsIGNzc0NsYXNzKSB7IGhhc0NsYXNzKGVsLCBjc3NDbGFzcykgPyByZW1vdmVDbGFzcyhlbCwgY3NzQ2xhc3MpIDogYWRkQ2xhc3MoZWwsIGNzc0NsYXNzKTsgfTsKICAgICAgICB9CgogICAgICAgIHZhciBub29wID0gZnVuY3Rpb24oKSB7fTsKCiAgICAgICAgdmFyIHByb2ZpbGVyU3RvcmFnZUtleSA9ICdzeW1mb255L3Byb2ZpbGVyLyc7CgogICAgICAgIHZhciBhZGRFdmVudExpc3RlbmVyOwoKICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICBpZiAoISgnYWRkRXZlbnRMaXN0ZW5lcicgaW4gZWwpKSB7CiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnROYW1lLCBjYWxsYmFjaykgewogICAgICAgICAgICAgICAgZWxlbWVudC5hdHRhY2hFdmVudCgnb24nICsgZXZlbnROYW1lLCBjYWxsYmFjayk7CiAgICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudE5hbWUsIGNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjaywgZmFsc2UpOwogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQpIHsKICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY2xpcGJvYXJkLXRleHRdJykuZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7CiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhlbGVtZW50LCAnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2xpcGJvYXJkLXRleHQnKSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHZhciByZXF1ZXN0ID0gZnVuY3Rpb24odXJsLCBvblN1Y2Nlc3MsIG9uRXJyb3IsIHBheWxvYWQsIG9wdGlvbnMsIHRyaWVzKSB7CiAgICAgICAgICAgIHZhciB4aHIgPSB3aW5kb3cuWE1MSHR0cFJlcXVlc3QgPyBuZXcgWE1MSHR0cFJlcXVlc3QoKSA6IG5ldyBBY3RpdmVYT2JqZWN0KCdNaWNyb3NvZnQuWE1MSFRUUCcpOwogICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICAgICAgICAgICAgb3B0aW9ucy5yZXRyeSA9IG9wdGlvbnMucmV0cnkgfHwgZmFsc2U7CiAgICAgICAgICAgIHRyaWVzID0gdHJpZXMgfHwgMTsKICAgICAgICAgICAgLyogdGhpcyBkZWxheXMgZm9yIDEyNSwgMzc1LCA2MjUsIDg3NSwgYW5kIDEwMDAsIC4uLiAqLwogICAgICAgICAgICB2YXIgZGVsYXkgPSB0cmllcyA8IDUgPyAodHJpZXMgLSAwLjUpICogMjUwIDogMTAwMDsKCiAgICAgICAgICAgIHhoci5vcGVuKG9wdGlvbnMubWV0aG9kIHx8ICdHRVQnLCB1cmwsIHRydWUpOwogICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignWC1SZXF1ZXN0ZWQtV2l0aCcsICdYTUxIdHRwUmVxdWVzdCcpOwogICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oc3RhdGUpIHsKICAgICAgICAgICAgICAgIGlmICg0ICE9PSB4aHIucmVhZHlTdGF0ZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09IDQwNCAmJiBvcHRpb25zLnJldHJ5ICYmICFvcHRpb25zLnN0b3ApIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCh1cmwsIG9uU3VjY2Vzcywgb25FcnJvciwgcGF5bG9hZCwgb3B0aW9ucywgdHJpZXMgKyAxKTsKICAgICAgICAgICAgICAgICAgICB9LCBkZWxheSk7CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICgyMDAgPT09IHhoci5zdGF0dXMpIHsKICAgICAgICAgICAgICAgICAgICAob25TdWNjZXNzIHx8IG5vb3ApKHhocik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIChvbkVycm9yIHx8IG5vb3ApKHhocik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZiAob3B0aW9ucy5vblNlbmQpIHsKICAgICAgICAgICAgICAgIG9wdGlvbnMub25TZW5kKHRyaWVzKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgeGhyLnNlbmQocGF5bG9hZCB8fCAnJyk7CiAgICAgICAgfTsKCiAgICAgICAgdmFyIGdldFByZWZlcmVuY2UgPSBmdW5jdGlvbihuYW1lKSB7CiAgICAgICAgICAgIGlmICghd2luZG93LmxvY2FsU3RvcmFnZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShwcm9maWxlclN0b3JhZ2VLZXkgKyBuYW1lKTsKICAgICAgICB9OwoKICAgICAgICB2YXIgc2V0UHJlZmVyZW5jZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7CiAgICAgICAgICAgIGlmICghd2luZG93LmxvY2FsU3RvcmFnZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHByb2ZpbGVyU3RvcmFnZUtleSArIG5hbWUsIHZhbHVlKTsKICAgICAgICB9OwoKICAgICAgICB2YXIgcmVxdWVzdFN0YWNrID0gW107CgogICAgICAgIHZhciBleHRyYWN0SGVhZGVycyA9IGZ1bmN0aW9uKHhociwgc3RhY2tFbGVtZW50KSB7CiAgICAgICAgICAgIC8qIEhlcmUgd2UgYXZvaWQgdG8gY2FsbCB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIgaW4gb3JkZXIgdG8gKi8KICAgICAgICAgICAgLyogcHJldmVudCBwb2xsdXRpbmcgdGhlIGNvbnNvbGUgd2l0aCBDT1JTIHNlY3VyaXR5IGVycm9ycyAqLwogICAgICAgICAgICB2YXIgYWxsSGVhZGVycyA9IHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKTsKICAgICAgICAgICAgdmFyIHJldDsKCiAgICAgICAgICAgIGlmIChyZXQgPSBhbGxIZWFkZXJzLm1hdGNoKC9eeC1kZWJ1Zy10b2tlbjpcXHMrKC4qKVwkL2ltKSkgewogICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnByb2ZpbGUgPSByZXRbMV07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHJldCA9IGFsbEhlYWRlcnMubWF0Y2goL154LWRlYnVnLXRva2VuLWxpbms6XFxzKyguKilcJC9pbSkpIHsKICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5wcm9maWxlclVybCA9IHJldFsxXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocmV0ID0gYWxsSGVhZGVycy5tYXRjaCgvXlN5bWZvbnktRGVidWctVG9vbGJhci1SZXBsYWNlOlxccysoLiopXCQvaW0pKSB7CiAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQudG9vbGJhclJlcGxhY2VGaW5pc2hlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnRvb2xiYXJSZXBsYWNlID0gJzEnID09PSByZXRbMV07CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICB2YXIgc3VjY2Vzc1N0cmVhayA9IDQ7CiAgICAgICAgdmFyIHBlbmRpbmdSZXF1ZXN0cyA9IDA7CiAgICAgICAgdmFyIHJlbmRlckFqYXhSZXF1ZXN0cyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgcmVxdWVzdENvdW50ZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1hamF4LXJlcXVlc3QtY291bnRlcicpOwogICAgICAgICAgICBpZiAoIXJlcXVlc3RDb3VudGVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVxdWVzdENvdW50ZXIudGV4dENvbnRlbnQgPSByZXF1ZXN0U3RhY2subGVuZ3RoOwoKICAgICAgICAgICAgdmFyIGluZm9TcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZi10b29sYmFyLWFqYXgtaW5mb1wiKTsKICAgICAgICAgICAgaWYgKGluZm9TcGFuKSB7CiAgICAgICAgICAgICAgICBpbmZvU3Bhbi50ZXh0Q29udGVudCA9IHJlcXVlc3RTdGFjay5sZW5ndGggKyAnIEFKQVggcmVxdWVzdCcgKyAocmVxdWVzdFN0YWNrLmxlbmd0aCAhPT0gMSA/ICdzJyA6ICcnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGFqYXhUb29sYmFyUGFuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1ibG9jay1hamF4Jyk7CiAgICAgICAgICAgIGlmIChyZXF1ZXN0U3RhY2subGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBhamF4VG9vbGJhclBhbmVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYWpheFRvb2xiYXJQYW5lbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChwZW5kaW5nUmVxdWVzdHMgPiAwKSB7CiAgICAgICAgICAgICAgICBhZGRDbGFzcyhhamF4VG9vbGJhclBhbmVsLCAnc2YtYWpheC1yZXF1ZXN0LWxvYWRpbmcnKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzdWNjZXNzU3RyZWFrIDwgNCkgewogICAgICAgICAgICAgICAgYWRkQ2xhc3MoYWpheFRvb2xiYXJQYW5lbCwgJ3NmLXRvb2xiYXItc3RhdHVzLXJlZCcpOwogICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoYWpheFRvb2xiYXJQYW5lbCwgJ3NmLWFqYXgtcmVxdWVzdC1sb2FkaW5nJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZW1vdmVDbGFzcyhhamF4VG9vbGJhclBhbmVsLCAnc2YtYWpheC1yZXF1ZXN0LWxvYWRpbmcnKTsKICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGFqYXhUb29sYmFyUGFuZWwsICdzZi10b29sYmFyLXN0YXR1cy1yZWQnKTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIHZhciBzdGFydEFqYXhSZXF1ZXN0ID0gZnVuY3Rpb24oaW5kZXgpIHsKICAgICAgICAgICAgdmFyIHRib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNmLXRvb2xiYXItYWpheC1yZXF1ZXN0LWxpc3QnKTsKICAgICAgICAgICAgaWYgKCF0Ym9keSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgbmJPZkFqYXhSZXF1ZXN0ID0gdGJvZHkucm93cy5sZW5ndGg7CiAgICAgICAgICAgIGlmIChuYk9mQWpheFJlcXVlc3QgPj0gMTAwKSB7CiAgICAgICAgICAgICAgICB0Ym9keS5kZWxldGVSb3coMCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gcmVxdWVzdFN0YWNrW2luZGV4XTsKICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3RzKys7CiAgICAgICAgICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICByZXF1ZXN0LkRPTU5vZGUgPSByb3c7CgogICAgICAgICAgICB2YXIgcmVxdWVzdE51bWJlckNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICByZXF1ZXN0TnVtYmVyQ2VsbC50ZXh0Q29udGVudCA9IGluZGV4ICsgMTsKICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHJlcXVlc3ROdW1iZXJDZWxsKTsKCiAgICAgICAgICAgIHZhciBwcm9maWxlckNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICBwcm9maWxlckNlbGwudGV4dENvbnRlbnQgPSAnbi9hJzsKICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHByb2ZpbGVyQ2VsbCk7CgogICAgICAgICAgICB2YXIgbWV0aG9kQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgIG1ldGhvZENlbGwudGV4dENvbnRlbnQgPSByZXF1ZXN0Lm1ldGhvZDsKICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKG1ldGhvZENlbGwpOwoKICAgICAgICAgICAgdmFyIHR5cGVDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTsKICAgICAgICAgICAgdHlwZUNlbGwudGV4dENvbnRlbnQgPSByZXF1ZXN0LnR5cGU7CiAgICAgICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0eXBlQ2VsbCk7CgogICAgICAgICAgICB2YXIgc3RhdHVzQ29kZUNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICB2YXIgc3RhdHVzQ29kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgc3RhdHVzQ29kZS50ZXh0Q29udGVudCA9ICduL2EnOwogICAgICAgICAgICBzdGF0dXNDb2RlQ2VsbC5hcHBlbmRDaGlsZChzdGF0dXNDb2RlKTsKICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHN0YXR1c0NvZGVDZWxsKTsKCiAgICAgICAgICAgIHZhciBwYXRoQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7CiAgICAgICAgICAgIHBhdGhDZWxsLmNsYXNzTmFtZSA9ICdzZi1hamF4LXJlcXVlc3QtdXJsJzsKICAgICAgICAgICAgaWYgKCdHRVQnID09PSByZXF1ZXN0Lm1ldGhvZCkgewogICAgICAgICAgICAgICAgdmFyIHBhdGhMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgICAgICAgICAgcGF0aExpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgcmVxdWVzdC51cmwpOwogICAgICAgICAgICAgICAgcGF0aExpbmsudGV4dENvbnRlbnQgPSByZXF1ZXN0LnVybDsKICAgICAgICAgICAgICAgIHBhdGhDZWxsLmFwcGVuZENoaWxkKHBhdGhMaW5rKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHBhdGhDZWxsLnRleHRDb250ZW50ID0gcmVxdWVzdC51cmw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGF0aENlbGwuc2V0QXR0cmlidXRlKCd0aXRsZScsIHJlcXVlc3QudXJsKTsKICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKHBhdGhDZWxsKTsKCiAgICAgICAgICAgIHZhciBkdXJhdGlvbkNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICBkdXJhdGlvbkNlbGwuY2xhc3NOYW1lID0gJ3NmLWFqYXgtcmVxdWVzdC1kdXJhdGlvbic7CiAgICAgICAgICAgIGR1cmF0aW9uQ2VsbC50ZXh0Q29udGVudCA9ICduL2EnOwogICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoZHVyYXRpb25DZWxsKTsKCiAgICAgICAgICAgIHJlcXVlc3QubGl2ZUR1cmF0aW9uSGFuZGxlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBkdXJhdGlvbkNlbGwudGV4dENvbnRlbnQgPSAobmV3IERhdGUoKSAtIHJlcXVlc3Quc3RhcnQpICsgJyBtcyc7CiAgICAgICAgICAgIH0sIDEwMCk7CgogICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gJ3NmLWFqYXgtcmVxdWVzdCBzZi1hamF4LXJlcXVlc3QtbG9hZGluZyc7CiAgICAgICAgICAgIHRib2R5Lmluc2VydEJlZm9yZShyb3csIG51bGwpOwoKICAgICAgICAgICAgdmFyIHRvb2xiYXJJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNmLXRvb2xiYXItYmxvY2stYWpheCAuc2YtdG9vbGJhci1pbmZvJyk7CiAgICAgICAgICAgIHRvb2xiYXJJbmZvLnNjcm9sbFRvcCA9IHRvb2xiYXJJbmZvLnNjcm9sbEhlaWdodDsKCiAgICAgICAgICAgIHJlbmRlckFqYXhSZXF1ZXN0cygpOwogICAgICAgIH07CgogICAgICAgIHZhciBmaW5pc2hBamF4UmVxdWVzdCA9IGZ1bmN0aW9uKGluZGV4KSB7CiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gcmVxdWVzdFN0YWNrW2luZGV4XTsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChyZXF1ZXN0LmxpdmVEdXJhdGlvbkhhbmRsZSk7CgogICAgICAgICAgICBpZiAoIXJlcXVlc3QuRE9NTm9kZSkgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAocmVxdWVzdC50b29sYmFyUmVwbGFjZSAmJiAhcmVxdWVzdC50b29sYmFyUmVwbGFjZUZpbmlzaGVkICYmIHJlcXVlc3QucHJvZmlsZSkgewogICAgICAgICAgICAgICAgLyogRmxhZyBhcyBjb21wbGV0ZSBiZWNhdXNlIGZpbmlzaEFqYXhSZXF1ZXN0IGNhbiBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMuICovCiAgICAgICAgICAgICAgICByZXF1ZXN0LnRvb2xiYXJSZXBsYWNlRmluaXNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgLyogU2VhcmNoIHVwIHRocm91Z2ggdGhlIERPTSB0byBmaW5kIHRoZSB0b29sYmFyJ3MgY29udGFpbmVyIElELiAqLwogICAgICAgICAgICAgICAgZm9yICh2YXIgZWxlbSA9IHJlcXVlc3QuRE9NTm9kZTsgZWxlbSAmJiBlbGVtICE9PSBkb2N1bWVudDsgZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgewogICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLmlkLm1hdGNoKC9ec2Z3ZHQvKSkgewogICAgICAgICAgICAgICAgICAgICAgICBTZmpzLmxvYWRUb29sYmFyKGVsZW0uaWQucmVwbGFjZSgvXnNmd2R0LywgJycpLCByZXF1ZXN0LnByb2ZpbGUpOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHBlbmRpbmdSZXF1ZXN0cy0tOwogICAgICAgICAgICB2YXIgcm93ID0gcmVxdWVzdC5ET01Ob2RlOwogICAgICAgICAgICAvKiBVbnBhY2sgdGhlIGNoaWxkcmVuIGZyb20gdGhlIHJvdyAqLwogICAgICAgICAgICB2YXIgcHJvZmlsZXJDZWxsID0gcm93LmNoaWxkcmVuWzFdOwogICAgICAgICAgICB2YXIgbWV0aG9kQ2VsbCA9IHJvdy5jaGlsZHJlblsyXTsKICAgICAgICAgICAgdmFyIHN0YXR1c0NvZGVDZWxsID0gcm93LmNoaWxkcmVuWzRdOwogICAgICAgICAgICB2YXIgc3RhdHVzQ29kZUVsZW0gPSBzdGF0dXNDb2RlQ2VsbC5jaGlsZHJlblswXTsKICAgICAgICAgICAgdmFyIGR1cmF0aW9uQ2VsbCA9IHJvdy5jaGlsZHJlbls2XTsKCiAgICAgICAgICAgIGlmIChyZXF1ZXN0LmVycm9yKSB7CiAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gJ3NmLWFqYXgtcmVxdWVzdCBzZi1hamF4LXJlcXVlc3QtZXJyb3InOwogICAgICAgICAgICAgICAgbWV0aG9kQ2VsbC5jbGFzc05hbWUgPSAnc2YtYWpheC1yZXF1ZXN0LWVycm9yJzsKICAgICAgICAgICAgICAgIHN1Y2Nlc3NTdHJlYWsgPSAwOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcm93LmNsYXNzTmFtZSA9ICdzZi1hamF4LXJlcXVlc3Qgc2YtYWpheC1yZXF1ZXN0LW9rJzsKICAgICAgICAgICAgICAgIHN1Y2Nlc3NTdHJlYWsrKzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzQ29kZSkgewogICAgICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzQ29kZSA8IDMwMCkgewogICAgICAgICAgICAgICAgICAgIHN0YXR1c0NvZGVFbGVtLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2YtdG9vbGJhci1zdGF0dXMnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxdWVzdC5zdGF0dXNDb2RlIDwgNDAwKSB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZUVsZW0uc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZi10b29sYmFyLXN0YXR1cyBzZi10b29sYmFyLXN0YXR1cy15ZWxsb3cnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQ29kZUVsZW0uc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZi10b29sYmFyLXN0YXR1cyBzZi10b29sYmFyLXN0YXR1cy1yZWQnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHN0YXR1c0NvZGVFbGVtLnRleHRDb250ZW50ID0gcmVxdWVzdC5zdGF0dXNDb2RlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3RhdHVzQ29kZUVsZW0uc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZi10b29sYmFyLXN0YXR1cyBzZi10b29sYmFyLXN0YXR1cy1yZWQnKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHJlcXVlc3QuZHVyYXRpb24pIHsKICAgICAgICAgICAgICAgIGR1cmF0aW9uQ2VsbC50ZXh0Q29udGVudCA9IHJlcXVlc3QuZHVyYXRpb24gKyAnIG1zJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHJlcXVlc3QucHJvZmlsZXJVcmwpIHsKICAgICAgICAgICAgICAgIHByb2ZpbGVyQ2VsbC50ZXh0Q29udGVudCA9ICcnOwogICAgICAgICAgICAgICAgdmFyIHByb2ZpbGVyTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgICAgIHByb2ZpbGVyTGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCByZXF1ZXN0LnByb2ZpbGVyVXJsKTsKICAgICAgICAgICAgICAgIHByb2ZpbGVyTGluay50ZXh0Q29udGVudCA9IHJlcXVlc3QucHJvZmlsZTsKICAgICAgICAgICAgICAgIHByb2ZpbGVyQ2VsbC5hcHBlbmRDaGlsZChwcm9maWxlckxpbmspOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZW5kZXJBamF4UmVxdWVzdHMoKTsKICAgICAgICB9OwoKICAgICAgICB7JSBpZiBleGNsdWRlZF9hamF4X3BhdGhzIGlzIGRlZmluZWQgJX0KICAgICAgICAgICAgaWYgKHdpbmRvdy5mZXRjaCAmJiB3aW5kb3cuZmV0Y2gucG9seWZpbGwgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdmFyIG9sZEZldGNoID0gd2luZG93LmZldGNoOwogICAgICAgICAgICAgICAgd2luZG93LmZldGNoID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gb2xkRmV0Y2guYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gYXJndW1lbnRzWzBdOwogICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSBhcmd1bWVudHNbMV07CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmFtVHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudHNbMF0pOwogICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbVR5cGUgPT09ICdbb2JqZWN0IFJlcXVlc3RdJykgewogICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBhcmd1bWVudHNbMF0udXJsOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IGFyZ3VtZW50c1swXS5tZXRob2QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogYXJndW1lbnRzWzBdLmNyZWRlbnRpYWxzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogYXJndW1lbnRzWzBdLmhlYWRlcnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlOiBhcmd1bWVudHNbMF0ubW9kZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiBhcmd1bWVudHNbMF0ucmVkaXJlY3QKICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBTdHJpbmcodXJsKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCF1cmwubWF0Y2gobmV3IFJlZ0V4cCh7eyBleGNsdWRlZF9hamF4X3BhdGhzfGpzb25fZW5jb2RlfHJhdyB9fSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSAnR0VUJzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMubWV0aG9kICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9IHBhcmFtcy5tZXRob2Q7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFja0VsZW1lbnQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2ZldGNoJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBuZXcgRGF0ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gcmVxdWVzdFN0YWNrLnB1c2goc3RhY2tFbGVtZW50KSAtIDE7CiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAocikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LmR1cmF0aW9uID0gbmV3IERhdGUoKSAtIHN0YWNrRWxlbWVudC5zdGFydDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5lcnJvciA9IHIuc3RhdHVzIDwgMjAwIHx8IHIuc3RhdHVzID49IDQwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5zdGF0dXNDb2RlID0gci5zdGF0dXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQucHJvZmlsZSA9IHIuaGVhZGVycy5nZXQoJ3gtZGVidWctdG9rZW4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5wcm9maWxlclVybCA9IHIuaGVhZGVycy5nZXQoJ3gtZGVidWctdG9rZW4tbGluaycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2tFbGVtZW50LnRvb2xiYXJSZXBsYWNlRmluaXNoZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC50b29sYmFyUmVwbGFjZSA9ICcxJyA9PT0gci5oZWFkZXJzLmdldCgnU3ltZm9ueS1EZWJ1Zy1Ub29sYmFyLVJlcGxhY2UnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaEFqYXhSZXF1ZXN0KGlkeCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5lcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5pc2hBamF4UmVxdWVzdChpZHgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRBamF4UmVxdWVzdChpZHgpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh3aW5kb3cuWE1MSHR0cFJlcXVlc3QgJiYgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgIHZhciBwcm94aWVkID0gWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW47CgogICAgICAgICAgICAgICAgWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbihtZXRob2QsIHVybCwgYXN5bmMsIHVzZXIsIHBhc3MpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgICAgICAgICAgICAgICAgIC8qIHByZXZlbnQgbG9nZ2luZyBBSkFYIGNhbGxzIHRvIHN0YXRpYyBhbmQgaW5saW5lIGZpbGVzLCBsaWtlIHRlbXBsYXRlcyAqLwogICAgICAgICAgICAgICAgICAgIHZhciBwYXRoID0gdXJsOwogICAgICAgICAgICAgICAgICAgIGlmICh1cmwuc2xpY2UoMCwgMSkgPT09ICcvJykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdXJsLmluZGV4T2YoJ3t7IHJlcXVlc3QuYmFzZVBhdGh8ZSgnanMnKSB9fScpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gdXJsLnNsaWNlKHt7IHJlcXVlc3QuYmFzZVBhdGh8bGVuZ3RoIH19KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgwID09PSB1cmwuaW5kZXhPZigne3sgKHJlcXVlc3Quc2NoZW1lQW5kSHR0cEhvc3QgfiByZXF1ZXN0LmJhc2VQYXRoKXxlKCdqcycpIH19JykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHVybC5zbGljZSh7eyAocmVxdWVzdC5zY2hlbWVBbmRIdHRwSG9zdCB+IHJlcXVlc3QuYmFzZVBhdGgpfGxlbmd0aCB9fSk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoIXBhdGgubWF0Y2gobmV3IFJlZ0V4cCh7eyBleGNsdWRlZF9hamF4X3BhdGhzfGpzb25fZW5jb2RlfHJhdyB9fSkpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGFja0VsZW1lbnQgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3hocicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogbmV3IERhdGUoKQogICAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IHJlcXVlc3RTdGFjay5wdXNoKHN0YWNrRWxlbWVudCkgLSAxOwoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5yZWFkeVN0YXRlID09IDQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQuZHVyYXRpb24gPSBuZXcgRGF0ZSgpIC0gc3RhY2tFbGVtZW50LnN0YXJ0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrRWxlbWVudC5lcnJvciA9IHNlbGYuc3RhdHVzIDwgMjAwIHx8IHNlbGYuc3RhdHVzID49IDQwMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFja0VsZW1lbnQuc3RhdHVzQ29kZSA9IHNlbGYuc3RhdHVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RIZWFkZXJzKHNlbGYsIHN0YWNrRWxlbWVudCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaEFqYXhSZXF1ZXN0KGlkeCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZhbHNlKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0QWpheFJlcXVlc3QoaWR4KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHByb3hpZWQuYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgeyUgZW5kaWYgJX0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaGFzQ2xhc3M6IGhhc0NsYXNzLAoKICAgICAgICAgICAgcmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLAoKICAgICAgICAgICAgYWRkQ2xhc3M6IGFkZENsYXNzLAoKICAgICAgICAgICAgdG9nZ2xlQ2xhc3M6IHRvZ2dsZUNsYXNzLAoKICAgICAgICAgICAgZ2V0UHJlZmVyZW5jZTogZ2V0UHJlZmVyZW5jZSwKCiAgICAgICAgICAgIHNldFByZWZlcmVuY2U6IHNldFByZWZlcmVuY2UsCgogICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyOiBhZGRFdmVudExpc3RlbmVyLAoKICAgICAgICAgICAgcmVxdWVzdDogcmVxdWVzdCwKCiAgICAgICAgICAgIHJlbmRlckFqYXhSZXF1ZXN0czogcmVuZGVyQWpheFJlcXVlc3RzLAoKICAgICAgICAgICAgZ2V0U2Z3ZHQ6IGZ1bmN0aW9uKHRva2VuKSB7CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2Z3ZHQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNmd2R0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nmd2R0JyArIHRva2VuKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZndkdDsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uKHNlbGVjdG9yLCB1cmwsIG9uU3VjY2Vzcywgb25FcnJvciwgb3B0aW9ucykgewogICAgICAgICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0b3IpOwoKICAgICAgICAgICAgICAgIGlmIChlbCAmJiBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2Z1cmwnKSAhPT0gdXJsKSB7CiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdCgKICAgICAgICAgICAgICAgICAgICAgICAgdXJsLAogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih4aHIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IHhoci5yZXNwb25zZVRleHQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2Z1cmwnLCB1cmwpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoZWwsICdsb2FkaW5nJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGVuZGluZyA9IHBlbmRpbmdSZXF1ZXN0czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVxdWVzdFN0YWNrLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRBamF4UmVxdWVzdChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdFN0YWNrW2ldLmR1cmF0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmlzaEFqYXhSZXF1ZXN0KGkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIFJldmVydCB0aGUgcGVuZGluZyBzdGF0ZSBpbiBjYXNlIHRoZXJlIHdhcyBhIHN0YXJ0IGNhbGxlZCB3aXRob3V0IGEgZmluaXNoIGFib3ZlLiAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3RzID0gcGVuZGluZzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvblN1Y2Nlc3MgfHwgbm9vcCkoeGhyLCBlbCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHhocikgeyAob25FcnJvciB8fCBub29wKSh4aHIsIGVsKTsgfSwKICAgICAgICAgICAgICAgICAgICAgICAgJycsCiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgc2hvd1Rvb2xiYXI6IGZ1bmN0aW9uKHRva2VuKSB7CiAgICAgICAgICAgICAgICB2YXIgc2Z3ZHQgPSB0aGlzLmdldFNmd2R0KHRva2VuKTsKICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKHNmd2R0LCAnc2YtZGlzcGxheS1ub25lJyk7CgogICAgICAgICAgICAgICAgaWYgKGdldFByZWZlcmVuY2UoJ3Rvb2xiYXIvZGlzcGxheVN0YXRlJykgPT0gJ25vbmUnKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1haW5Db250ZW50LScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyQ2xlYXJlci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmTWluaVRvb2xiYXItJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1haW5Db250ZW50LScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhckNsZWFyZXItJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZNaW5pVG9vbGJhci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBoaWRlVG9vbGJhcjogZnVuY3Rpb24odG9rZW4pIHsKICAgICAgICAgICAgICAgIHZhciBzZndkdCA9IHRoaXMuZ2V0U2Z3ZHQodG9rZW4pOwogICAgICAgICAgICAgICAgYWRkQ2xhc3Moc2Z3ZHQsICdzZi1kaXNwbGF5LW5vbmUnKTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGluaXRUb29sYmFyOiBmdW5jdGlvbih0b2tlbikgewogICAgICAgICAgICAgICAgdGhpcy5zaG93VG9vbGJhcih0b2tlbik7CgogICAgICAgICAgICAgICAgdmFyIGhpZGVCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFySGlkZUJ1dHRvbi0nICsgdG9rZW4pOwogICAgICAgICAgICAgICAgdmFyIGhpZGVCdXR0b25TdmcgPSBoaWRlQnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpOwogICAgICAgICAgICAgICAgaGlkZUJ1dHRvblN2Zy5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTsKICAgICAgICAgICAgICAgIGhpZGVCdXR0b25Tdmcuc2V0QXR0cmlidXRlKCdmb2N1c2FibGUnLCAnZmFsc2UnKTsKICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoaGlkZUJ1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSB0aGlzLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgIChwLnByZXZpb3VzRWxlbWVudFNpYmxpbmcgfHwgcC5wcmV2aW91c1NpYmxpbmcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmTWluaVRvb2xiYXItJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICBzZXRQcmVmZXJlbmNlKCd0b29sYmFyL2Rpc3BsYXlTdGF0ZScsICdub25lJyk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB2YXIgc2hvd0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJNaW5pVG9nZ2xlci0nICsgdG9rZW4pOwogICAgICAgICAgICAgICAgdmFyIHNob3dCdXR0b25TdmcgPSBzaG93QnV0dG9uLnF1ZXJ5U2VsZWN0b3IoJ3N2ZycpOwogICAgICAgICAgICAgICAgc2hvd0J1dHRvblN2Zy5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTsKICAgICAgICAgICAgICAgIHNob3dCdXR0b25Tdmcuc2V0QXR0cmlidXRlKCdmb2N1c2FibGUnLCAnZmFsc2UnKTsKICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoc2hvd0J1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW0gPSB0aGlzLnBhcmVudE5vZGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0uc3R5bGUuZGlzcGxheSA9PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1haW5Db250ZW50LScgKyB0b2tlbikuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhckNsZWFyZXItJyArIHRva2VuKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZlRvb2xiYXJNYWluQ29udGVudC0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZUb29sYmFyQ2xlYXJlci0nICsgdG9rZW4pLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHNldFByZWZlcmVuY2UoJ3Rvb2xiYXIvZGlzcGxheVN0YXRlJywgJ2Jsb2NrJyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGxvYWRUb29sYmFyOiBmdW5jdGlvbih0b2tlbiwgbmV3VG9rZW4pIHsKICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICAgICAgICAgIHZhciB0cmllc0NvdW50ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ZMb2FkQ291bnRlci0nICsgdG9rZW4pOwoKICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgICAgICAgICAgICAgIHJldHJ5OiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG9uU2VuZDogZnVuY3Rpb24gKGNvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PT0gMykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5pbml0VG9vbGJhcih0b2tlbik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmllc0NvdW50ZXIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWVzQ291bnRlci50ZXh0Q29udGVudCA9IGNvdW50OwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdmFyIGNhbmNlbEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZkxvYWRDYW5jZWwtJyArIHRva2VuKTsKICAgICAgICAgICAgICAgIGlmIChjYW5jZWxCdXR0b24pIHsKICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGNhbmNlbEJ1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0b3AgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmhpZGVUb29sYmFyKHRva2VuKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBuZXdUb2tlbiA9IChuZXdUb2tlbiB8fCB0b2tlbik7CgogICAgICAgICAgICAgICAgdGhpcy5sb2FkKAogICAgICAgICAgICAgICAgICAgICdzZndkdCcgKyB0b2tlbiwKICAgICAgICAgICAgICAgICAgICAne3sgdXJsKFwiX3dkdFwiLCB7IFwidG9rZW5cIjogXCJ4eHh4eHhcIiB9KXxlc2NhcGUoJ2pzJykgfX0nLnJlcGxhY2UoL3h4eHh4eC8sIG5ld1Rva2VuKSwKICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih4aHIsIGVsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8qIERvIG5vdGhpbmcgaW4gdGhlIGVkZ2UgY2FzZSB3aGVyZSB0aGUgdG9vbGJhciBoYXMgYWxyZWFkeSBiZWVuIHJlcGxhY2VkIHdpdGggYSBuZXcgb25lICovCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NmVG9vbGJhck1haW5Db250ZW50LScgKyBuZXdUb2tlbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgLyogRXZhbHVhdGUgaW4gZ2xvYmFsIHNjb3BlIHNjcmlwdHMgZW1iZWRkZWQgaW5zaWRlIHRoZSB0b29sYmFyICovCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpLCBzY3JpcHRzID0gW10uc2xpY2UuY2FsbChlbC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHQnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzY3JpcHRzLmxlbmd0aDsgKytpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NyaXB0c1tpXS5maXJzdENoaWxkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZhbC5jYWxsKHt9LCBzY3JpcHRzW2ldLmZpcnN0Q2hpbGQubm9kZVZhbHVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IC0xICE9PSB4aHIucmVzcG9uc2VUZXh0LmluZGV4T2YoJ3NmLXRvb2xiYXJyZXNldCcpID8gJ2Jsb2NrJyA6ICdub25lJzsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbC5zdHlsZS5kaXNwbGF5ID09ICdub25lJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmluaXRUb29sYmFyKG5ld1Rva2VuKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIEhhbmRsZSB0b29sYmFyLWluZm8gcG9zaXRpb24gKi8KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvb2xiYXJCbG9ja3MgPSBbXS5zbGljZS5jYWxsKGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZi10b29sYmFyLWJsb2NrJykpOwogICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdG9vbGJhckJsb2Nrcy5sZW5ndGg7ICsraSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckJsb2Nrc1tpXS5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9vbGJhckluZm8gPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZi10b29sYmFyLWluZm8nKVswXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZVdpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudFdpZHRoID0gdG9vbGJhckluZm8ub2Zmc2V0V2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlZnRWYWx1ZSA9IChlbGVtZW50V2lkdGggKyB0aGlzLm9mZnNldExlZnQpIC0gcGFnZVdpZHRoOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByaWdodFZhbHVlID0gKGVsZW1lbnRXaWR0aCArIChwYWdlV2lkdGggLSB0aGlzLm9mZnNldExlZnQpKSAtIHBhZ2VXaWR0aDsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogUmVzZXQgcmlnaHQgYW5kIGxlZnQgdmFsdWUsIHVzZWZ1bCBvbiB3aW5kb3cgcmVzaXplICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckluZm8uc3R5bGUucmlnaHQgPSAnJzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sYmFySW5mby5zdHlsZS5sZWZ0ID0gJyc7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50V2lkdGggPiBwYWdlV2lkdGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckluZm8uc3R5bGUubGVmdCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGxlZnRWYWx1ZSA+IDAgJiYgcmlnaHRWYWx1ZSA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9vbGJhckluZm8uc3R5bGUucmlnaHQgPSAocmlnaHRWYWx1ZSAqIC0xKSArICdweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsZWZ0VmFsdWUgPCAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJbmZvLnN0eWxlLmxlZnQgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2xiYXJJbmZvLnN0eWxlLnJpZ2h0ID0gJzBweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQWpheFJlcXVlc3RzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNmLXRvb2xiYXItYWpheC1jbGVhcicpLCAnY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RTdGFjayA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyQWpheFJlcXVlc3RzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzU3RyZWFrID0gNDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWFqYXgtcmVxdWVzdC1saXN0JykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZi10b29sYmFyLWJsb2NrLWFqYXgnKSwgJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNmLXRvb2xiYXItYmxvY2stYWpheCAuc2YtdG9vbGJhci1pbmZvJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnNjcm9sbFRvcCA9IGVsZW0uc2Nyb2xsSGVpZ2h0OwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1ibG9jay1hamF4ID4gLnNmLXRvb2xiYXItaWNvbicpLCAnY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3ModGhpcy5wYXJlbnROb2RlLCAnaG92ZXInKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHVtcEluZm8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2YtdG9vbGJhci1ibG9jay1kdW1wIC5zZi10b29sYmFyLWluZm8nKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGR1bXBJbmZvKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGR1bXBJbmZvLCAnc2ZiZWZvcmVkdW1wY29sbGFwc2UnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVtcEluZm8uc3R5bGUubWluSGVpZ2h0ID0gZHVtcEluZm8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0KydweCc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoZHVtcEluZm8sICdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1bXBJbmZvLnN0eWxlLm1pbkhlaWdodCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHhocikgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMCAmJiAhb3B0aW9ucy5zdG9wKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Z3ZHQgPSB0aGF0LmdldFNmd2R0KHRva2VuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNmd2R0LmlubmVySFRNTCA9ICdcXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZi10b29sYmFycmVzZXRcIj5cXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2YtdG9vbGJhci1pY29uXCI+PHN2ZyB3aWR0aD1cIjI2XCIgaGVpZ2h0PVwiMjhcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmVyc2lvbj1cIjEuMVwiIHg9XCIwcHhcIiB5PVwiMHB4XCIgdmlld0JveD1cIjAgMCAyNiAyOFwiIGVuYWJsZS1iYWNrZ3JvdW5kPVwibmV3IDAgMCAyNiAyOFwiIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+PHBhdGggZmlsbD1cIiNGRkZGRkZcIiBkPVwiTTEzIDBDNS44IDAgMCA1LjggMCAxM2MwIDcuMiA1LjggMTMgMTMgMTNjNy4yIDAgMTMtNS44IDEzLTEzQzI2IDUuOCAyMC4yIDAgMTMgMHogTTIwIDcuNSBjLTAuNiAwLTEtMC4zLTEtMC45YzAtMC4yIDAtMC40IDAuMi0wLjZjMC4xLTAuMyAwLjItMC4zIDAuMi0wLjRjMC0wLjMtMC41LTAuNC0wLjctMC40Yy0yIDAuMS0yLjUgMi43LTIuOSA0LjhsLTAuMiAxLjEgYzEuMSAwLjIgMS45IDAgMi40LTAuM2MwLjYtMC40LTAuMi0wLjgtMC4xLTEuM0MxOCA5LjIgMTguNCA5IDE4LjcgOC45YzAuNSAwIDAuOCAwLjUgMC44IDFjMCAwLjgtMS4xIDItMy4zIDEuOSBjLTAuMyAwLTAuNSAwLTAuNy0wLjFMMTUgMTQuMWMtMC40IDEuNy0wLjkgNC4xLTIuNiA2LjJjLTEuNSAxLjgtMy4xIDIuMS0zLjggMi4xYy0xLjMgMC0yLjEtMC42LTIuMi0xLjZjMC0wLjkgMC44LTEuNCAxLjMtMS40IGMwLjcgMCAxLjIgMC41IDEuMiAxLjFjMCAwLjUtMC4yIDAuNi0wLjQgMC43Yy0wLjEgMC4xLTAuMyAwLjItMC4zIDAuNGMwIDAuMSAwLjEgMC4zIDAuNCAwLjNjMC41IDAgMC45LTAuMyAxLjItMC41IGMxLjMtMSAxLjctMi45IDIuNC02LjJsMC4xLTAuOGMwLjItMS4xIDAuNS0yLjMgMC44LTMuNWMtMC45LTAuNy0xLjQtMS41LTIuNi0xLjhjLTAuOC0wLjItMS4zIDAtMS43IDAuNEM4LjQgMTAgOC42IDEwLjcgOSAxMS4xIGwwLjcgMC43YzAuOCAwLjkgMS4zIDEuNyAxLjEgMi43Yy0wLjMgMS42LTIuMSAyLjgtNC4zIDIuMWMtMS45LTAuNi0yLjItMS45LTItMi43YzAuMi0wLjYgMC43LTAuOCAxLjItMC42IGMwLjUgMC4yIDAuNyAwLjggMC42IDEuM2MwIDAuMSAwIDAuMS0wLjEgMC4zQzYgMTUgNS45IDE1LjIgNS45IDE1LjNjLTAuMSAwLjQgMC40IDAuNyAwLjggMC44YzAuOCAwLjMgMS43LTAuMiAxLjktMC45IGMwLjItMC42LTAuMi0xLjEtMC40LTEuMmwtMC44LTAuOWMtMC40LTAuNC0xLjItMS41LTAuOC0yLjhjMC4yLTAuNSAwLjUtMSAwLjktMS40YzEtMC43IDItMC44IDMtMC42YzEuMyAwLjQgMS45IDEuMiAyLjggMS45IGMwLjUtMS4zIDEuMS0yLjYgMi0zLjhjMC45LTEgMi0xLjcgMy4zLTEuOEMyMCA0LjggMjEgNS40IDIxIDYuM0MyMSA2LjcgMjAuOCA3LjUgMjAgNy41elwiLz48L3N2Zz48L2Rpdj5cXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBsb2FkaW5nIHRoZSB3ZWIgZGVidWcgdG9vbGJhci4gPGEgaHJlZj1cInt7IHVybChcIl9wcm9maWxlcl9ob21lXCIpfGVzY2FwZSgnanMnKSB9fScgKyBuZXdUb2tlbiArICdcIj5PcGVuIHRoZSB3ZWIgcHJvZmlsZXIuPC9hPlxcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZndkdC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NmLXRvb2xiYXIgc2YtZXJyb3ItdG9vbGJhcicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvcHRpb25zCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgdG9nZ2xlOiBmdW5jdGlvbihzZWxlY3RvciwgZWxPbiwgZWxPZmYpIHsKICAgICAgICAgICAgICAgIHZhciB0bXAgPSBlbE9uLnN0eWxlLmRpc3BsYXksCiAgICAgICAgICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcik7CgogICAgICAgICAgICAgICAgZWxPbi5zdHlsZS5kaXNwbGF5ID0gZWxPZmYuc3R5bGUuZGlzcGxheTsKICAgICAgICAgICAgICAgIGVsT2ZmLnN0eWxlLmRpc3BsYXkgPSB0bXA7CgogICAgICAgICAgICAgICAgaWYgKGVsKSB7CiAgICAgICAgICAgICAgICAgICAgZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJyA9PT0gdG1wID8gJ25vbmUnIDogJ2Jsb2NrJzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGNyZWF0ZVRhYnM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIHRhYkdyb3VwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZi10YWJzOm5vdChbZGF0YS1wcm9jZXNzZWQ9dHJ1ZV0pJyk7CgogICAgICAgICAgICAgICAgLyogY3JlYXRlIHRoZSB0YWIgbmF2aWdhdGlvbiBmb3IgZWFjaCBncm91cCBvZiB0YWJzICovCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhYkdyb3Vwcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciB0YWJzID0gdGFiR3JvdXBzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+IC50YWInKTsKICAgICAgICAgICAgICAgICAgICB2YXIgdGFiTmF2aWdhdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgICAgICAgICAgICAgICAgdGFiTmF2aWdhdGlvbi5jbGFzc05hbWUgPSAndGFiLW5hdmlnYXRpb24nOwoKICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRUYWJJZCA9ICd0YWItJyArIGkgKyAnLTAnOyAvKiBzZWxlY3QgdGhlIGZpcnN0IHRhYiBieSBkZWZhdWx0ICovCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0YWJzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJJZCA9ICd0YWItJyArIGkgKyAnLScgKyBqOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFiVGl0bGUgPSB0YWJzW2pdLnF1ZXJ5U2VsZWN0b3IoJy50YWItdGl0bGUnKS5pbm5lckhUTUw7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFiTmF2aWdhdGlvbkl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogICAgICAgICAgICAgICAgICAgICAgICB0YWJOYXZpZ2F0aW9uSXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFiLWlkJywgdGFiSWQpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzQ2xhc3ModGFic1tqXSwgJ2FjdGl2ZScpKSB7IHNlbGVjdGVkVGFiSWQgPSB0YWJJZDsgfQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzQ2xhc3ModGFic1tqXSwgJ2Rpc2FibGVkJykpIHsgYWRkQ2xhc3ModGFiTmF2aWdhdGlvbkl0ZW0sICdkaXNhYmxlZCcpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgIHRhYk5hdmlnYXRpb25JdGVtLmlubmVySFRNTCA9IHRhYlRpdGxlOwogICAgICAgICAgICAgICAgICAgICAgICB0YWJOYXZpZ2F0aW9uLmFwcGVuZENoaWxkKHRhYk5hdmlnYXRpb25JdGVtKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJDb250ZW50ID0gdGFic1tqXS5xdWVyeVNlbGVjdG9yKCcudGFiLWNvbnRlbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGFiQ29udGVudC5wYXJlbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnaWQnLCB0YWJJZCk7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB0YWJHcm91cHNbaV0uaW5zZXJ0QmVmb3JlKHRhYk5hdmlnYXRpb24sIHRhYkdyb3Vwc1tpXS5maXJzdENoaWxkKTsKICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS10YWItaWQ9XCInICsgc2VsZWN0ZWRUYWJJZCArICdcIl0nKSwgJ2FjdGl2ZScpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8qIGRpc3BsYXkgdGhlIGFjdGl2ZSB0YWIgYW5kIGFkZCB0aGUgJ2NsaWNrJyBldmVudCBsaXN0ZW5lcnMgKi8KICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0YWJHcm91cHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICB0YWJOYXZpZ2F0aW9uID0gdGFiR3JvdXBzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+IC50YWItbmF2aWdhdGlvbiBsaScpOwoKICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgdGFiTmF2aWdhdGlvbi5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgICAgICB0YWJJZCA9IHRhYk5hdmlnYXRpb25bal0uZ2V0QXR0cmlidXRlKCdkYXRhLXRhYi1pZCcpOwogICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWJJZCkucXVlcnlTZWxlY3RvcignLnRhYi10aXRsZScpLmNsYXNzTmFtZSA9ICdoaWRkZW4nOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0NsYXNzKHRhYk5hdmlnYXRpb25bal0sICdhY3RpdmUnKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFiSWQpLmNsYXNzTmFtZSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWJJZCkuY2xhc3NOYW1lID0gJ2hpZGRlbic7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHRhYk5hdmlnYXRpb25bal0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlVGFiID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIG5lZWRlZCBiZWNhdXNlIHdoZW4gdGhlIHRhYiBjb250YWlucyBIVE1MIGNvbnRlbnRzLCB1c2VyIGNhbiBjbGljayAqLwogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogb24gYW55IG9mIHRob3NlIGVsZW1lbnRzIGluc3RlYWQgb2YgdGhlaXIgcGFyZW50ICc8bGk+JyBlbGVtZW50ICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoYWN0aXZlVGFiLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ2xpJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVRhYiA9IGFjdGl2ZVRhYi5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGdldCB0aGUgZnVsbCBsaXN0IG9mIHRhYnMgdGhyb3VnaCB0aGUgcGFyZW50IG9mIHRoZSBhY3RpdmUgdGFiIGVsZW1lbnQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJOYXZpZ2F0aW9uID0gYWN0aXZlVGFiLnBhcmVudE5vZGUuY2hpbGRyZW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRhYk5hdmlnYXRpb24ubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFiSWQgPSB0YWJOYXZpZ2F0aW9uW2tdLmdldEF0dHJpYnV0ZSgnZGF0YS10YWItaWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YWJJZCkuY2xhc3NOYW1lID0gJ2hpZGRlbic7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3ModGFiTmF2aWdhdGlvbltrXSwgJ2FjdGl2ZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZENsYXNzKGFjdGl2ZVRhYiwgJ2FjdGl2ZScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVRhYklkID0gYWN0aXZlVGFiLmdldEF0dHJpYnV0ZSgnZGF0YS10YWItaWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFjdGl2ZVRhYklkKS5jbGFzc05hbWUgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRhYkdyb3Vwc1tpXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvY2Vzc2VkJywgJ3RydWUnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIGNyZWF0ZVRvZ2dsZXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIHRvZ2dsZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2YtdG9nZ2xlOm5vdChbZGF0YS1wcm9jZXNzZWQ9dHJ1ZV0pJyk7CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b2dnbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRTZWxlY3RvciA9IHRvZ2dsZXNbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLXRvZ2dsZS1zZWxlY3RvcicpOwogICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50U2VsZWN0b3IpOwoKICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhlbGVtZW50LCAnc2YtdG9nZ2xlLWNvbnRlbnQnKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRvZ2dsZXNbaV0uaGFzQXR0cmlidXRlKCdkYXRhLXRvZ2dsZS1pbml0aWFsJykgJiYgdG9nZ2xlc1tpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9nZ2xlLWluaXRpYWwnKSA9PSAnZGlzcGxheScpIHsKICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3ModG9nZ2xlc1tpXSwgJ3NmLXRvZ2dsZS1vbicpOwogICAgICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhlbGVtZW50LCAnc2YtdG9nZ2xlLXZpc2libGUnKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyh0b2dnbGVzW2ldLCAnc2YtdG9nZ2xlLW9mZicpOwogICAgICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyhlbGVtZW50LCAnc2YtdG9nZ2xlLWhpZGRlbicpOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcih0b2dnbGVzW2ldLCAnY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnJyAhPT0gd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIERvbid0IGRvIGFueXRoaW5nIG9uIHRleHQgc2VsZWN0aW9uICovCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b2dnbGUgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7CgogICAgICAgICAgICAgICAgICAgICAgICAvKiBuZWVkZWQgYmVjYXVzZSB3aGVuIHRoZSB0b2dnbGUgY29udGFpbnMgSFRNTCBjb250ZW50cywgdXNlciBjYW4gY2xpY2sgKi8KICAgICAgICAgICAgICAgICAgICAgICAgLyogb24gYW55IG9mIHRob3NlIGVsZW1lbnRzIGluc3RlYWQgb2YgdGhlaXIgcGFyZW50ICcuc2YtdG9nZ2xlJyBlbGVtZW50ICovCiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICghaGFzQ2xhc3ModG9nZ2xlLCAnc2YtdG9nZ2xlJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZSA9IHRvZ2dsZS5wYXJlbnROb2RlOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodG9nZ2xlLmdldEF0dHJpYnV0ZSgnZGF0YS10b2dnbGUtc2VsZWN0b3InKSk7CgogICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyh0b2dnbGUsICdzZi10b2dnbGUtb24nKTsKICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlQ2xhc3ModG9nZ2xlLCAnc2YtdG9nZ2xlLW9mZicpOwogICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhlbGVtZW50LCAnc2YtdG9nZ2xlLWhpZGRlbicpOwogICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVDbGFzcyhlbGVtZW50LCAnc2YtdG9nZ2xlLXZpc2libGUnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIC8qIHRoZSB0b2dnbGUgZG9lc24ndCBjaGFuZ2UgaXRzIGNvbnRlbnRzIHdoZW4gY2xpY2tpbmcgb24gaXQgKi8KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0b2dnbGUuaGFzQXR0cmlidXRlKCdkYXRhLXRvZ2dsZS1hbHQtY29udGVudCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdG9nZ2xlLmhhc0F0dHJpYnV0ZSgnZGF0YS10b2dnbGUtb3JpZ2luYWwtY29udGVudCcpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGUuc2V0QXR0cmlidXRlKCdkYXRhLXRvZ2dsZS1vcmlnaW5hbC1jb250ZW50JywgdG9nZ2xlLmlubmVySFRNTCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Q29udGVudCA9IHRvZ2dsZS5pbm5lckhUTUw7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbENvbnRlbnQgPSB0b2dnbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZ2dsZS1vcmlnaW5hbC1jb250ZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbHRDb250ZW50ID0gdG9nZ2xlLmdldEF0dHJpYnV0ZSgnZGF0YS10b2dnbGUtYWx0LWNvbnRlbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlLmlubmVySFRNTCA9IGN1cnJlbnRDb250ZW50ICE9PSBhbHRDb250ZW50ID8gYWx0Q29udGVudCA6IG9yaWdpbmFsQ29udGVudDsKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgLyogUHJldmVudHMgZnJvbSBkaXNhbGxvd2luZyBjbGlja3Mgb24gbGlua3MgaW5zaWRlIHRvZ2dsZXMgKi8KICAgICAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlTGlua3MgPSB0b2dnbGVzW2ldLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRvZ2dsZUxpbmtzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIodG9nZ2xlTGlua3Nbal0sICdjbGljaycsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgLyogUHJldmVudHMgZnJvbSBkaXNhbGxvd2luZyBjbGlja3Mgb24gXCJjb3B5IHRvIGNsaXBib2FyZFwiIGVsZW1lbnRzIGluc2lkZSB0b2dnbGVzICovCiAgICAgICAgICAgICAgICAgICAgdmFyIGNvcHlUb0NsaXBib2FyZEVsZW1lbnRzID0gdG9nZ2xlc1tpXS5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuW2RhdGEtY2xpcGJvYXJkLXRleHRdJyk7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjb3B5VG9DbGlwYm9hcmRFbGVtZW50cy5sZW5ndGg7IGsrKykgewogICAgICAgICAgICAgICAgICAgICAgICBhZGRFdmVudExpc3RlbmVyKGNvcHlUb0NsaXBib2FyZEVsZW1lbnRzW2tdLCAnY2xpY2snLCBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRvZ2dsZXNbaV0uc2V0QXR0cmlidXRlKCdkYXRhLXByb2Nlc3NlZCcsICd0cnVlJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBpbml0aWFsaXplTG9nc1RhYmxlOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIFNmanMudXBkYXRlTG9nc1RhYmxlKCk7CgogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxvZy1maWx0ZXIgaW5wdXQnKS5mb3JFYWNoKChpbnB1dCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHsgU2Zqcy51cGRhdGVMb2dzVGFibGUoKTsgfSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZmlsdGVyLXNlbGVjdC1hbGwtb3Itbm9uZSBidXR0b24nKS5mb3JFYWNoKChsaW5rKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0QWxsID0gbGluay5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdC1hbGwnKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGluay5jbG9zZXN0KCcubG9nLWZpbHRlci1jb250ZW50JykucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKS5mb3JFYWNoKChpbnB1dCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IHNlbGVjdEFsbDsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBTZmpzLnVwZGF0ZUxvZ3NUYWJsZSgpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4gewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2RldGFpbHMubG9nLWZpbHRlcicpLmZvckVhY2goKGZpbHRlckVsZW1lbnQpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXJFbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkgJiYgZmlsdGVyRWxlbWVudC5vcGVuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJFbGVtZW50Lm9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICB1cGRhdGVMb2dzVGFibGU6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRUeXBlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2xvZy1maWx0ZXItdHlwZSBpbnB1dDpjaGVja2VkJykudmFsdWU7CiAgICAgICAgICAgICAgICBjb25zdCBwcmlvcml0aWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2xvZy1maWx0ZXItcHJpb3JpdHkgaW5wdXQnKTsKICAgICAgICAgICAgICAgIGNvbnN0IGFsbFByaW9yaXRpZXMgPSBBcnJheS5mcm9tKHByaW9yaXRpZXMpLm1hcCgoaW5wdXQpID0+IGlucHV0LnZhbHVlKTsKICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkUHJpb3JpdGllcyA9IEFycmF5LmZyb20ocHJpb3JpdGllcykuZmlsdGVyKChpbnB1dCkgPT4gaW5wdXQuY2hlY2tlZCkubWFwKChpbnB1dCkgPT4gaW5wdXQudmFsdWUpOwogICAgICAgICAgICAgICAgY29uc3QgY2hhbm5lbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbG9nLWZpbHRlci1jaGFubmVsIGlucHV0Jyk7CiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZENoYW5uZWxzID0gQXJyYXkuZnJvbShjaGFubmVscykuZmlsdGVyKChpbnB1dCkgPT4gaW5wdXQuY2hlY2tlZCkubWFwKChpbnB1dCkgPT4gaW5wdXQudmFsdWUpOwoKICAgICAgICAgICAgICAgIGNvbnN0IGxvZ3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0YWJsZS5sb2dzJyk7CiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gbG9ncykgewogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvKiBoaWRlIHJvd3MgdGhhdCBkb24ndCBtYXRjaCB0aGUgY3VycmVudCBmaWx0ZXJzICovCiAgICAgICAgICAgICAgICBsZXQgbnVtVmlzaWJsZVJvd3MgPSAwOwogICAgICAgICAgICAgICAgbG9ncy5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0cicpLmZvckVhY2goKHJvdykgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICgnYWxsJyAhPT0gc2VsZWN0ZWRUeXBlICYmIHNlbGVjdGVkVHlwZSAhPT0gcm93LmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaW9yaXR5ID0gcm93LmdldEF0dHJpYnV0ZSgnZGF0YS1wcmlvcml0eScpOwogICAgICAgICAgICAgICAgICAgIGlmIChmYWxzZSA9PT0gc2VsZWN0ZWRQcmlvcml0aWVzLmluY2x1ZGVzKHByaW9yaXR5KSAmJiB0cnVlID09PSBhbGxQcmlvcml0aWVzLmluY2x1ZGVzKHByaW9yaXR5KSkgewogICAgICAgICAgICAgICAgICAgICAgICByb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCcnICE9PSByb3cuZ2V0QXR0cmlidXRlKCdkYXRhLWNoYW5uZWwnKSAmJiBmYWxzZSA9PT0gc2VsZWN0ZWRDaGFubmVscy5pbmNsdWRlcyhyb3cuZ2V0QXR0cmlidXRlKCdkYXRhLWNoYW5uZWwnKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7CiAgICAgICAgICAgICAgICAgICAgbnVtVmlzaWJsZVJvd3MrKzsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlLmxvZ3MnKS5zdHlsZS5kaXNwbGF5ID0gMCA9PT0gbnVtVmlzaWJsZVJvd3MgPyAnbm9uZScgOiAndGFibGUnOwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vLWxvZ3MtbWVzc2FnZScpLnN0eWxlLmRpc3BsYXkgPSAwID09PSBudW1WaXNpYmxlUm93cyA/ICdibG9jaycgOiAnbm9uZSc7CgogICAgICAgICAgICAgICAgLyogdXBkYXRlIHRoZSBzZWxlY3RlZCB0b3RhbHMgb2YgYWxsIGZpbHRlcnMgKi8KICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNsb2ctZmlsdGVyLXByaW9yaXR5IC5maWx0ZXItYWN0aXZlLW51bScpLmlubmVyVGV4dCA9IChwcmlvcml0aWVzLmxlbmd0aCA9PT0gc2VsZWN0ZWRQcmlvcml0aWVzLmxlbmd0aCkgPyAnQWxsJyA6IHNlbGVjdGVkUHJpb3JpdGllcy5sZW5ndGg7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbG9nLWZpbHRlci1jaGFubmVsIC5maWx0ZXItYWN0aXZlLW51bScpLmlubmVyVGV4dCA9IChjaGFubmVscy5sZW5ndGggPT09IHNlbGVjdGVkQ2hhbm5lbHMubGVuZ3RoKSA/ICdBbGwnIDogc2VsZWN0ZWRDaGFubmVscy5sZW5ndGg7CgogICAgICAgICAgICAgICAgLyogdXBkYXRlIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgXCJsb2cgdHlwZVwiIHRhYiAqLwogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2xvZy1maWx0ZXItdHlwZSBsaScpLmZvckVhY2goKHRhYikgPT4gdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpKTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNsb2ctZmlsdGVyLXR5cGUgaW5wdXRbdmFsdWU9XCJcJHtzZWxlY3RlZFR5cGV9XCJdYCkucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgfSwKICAgICAgICB9OwogICAgfSkoKTsKCiAgICBTZmpzLmFkZEV2ZW50TGlzdGVuZXIoZG9jdW1lbnQsICdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7CiAgICAgICAgU2Zqcy5jcmVhdGVUYWJzKCk7CiAgICAgICAgU2Zqcy5jcmVhdGVUb2dnbGVzKCk7CiAgICB9KTsKfQovKl1dPiovPC9zY3JpcHQ+CiIsICJAV2ViUHJvZmlsZXIvUHJvZmlsZXIvYmFzZV9qcy5odG1sLnR3aWciLCAiL2hvbWUvZmFyaWRhL1TDqWzDqWNoYXJnZW1lbnRzL21lZGlhdGVrLWZpbi92ZW5kb3Ivc3ltZm9ueS93ZWItcHJvZmlsZXItYnVuZGxlL1Jlc291cmNlcy92aWV3cy9Qcm9maWxlci9iYXNlX2pzLmh0bWwudHdpZyIpOwogICAgfQp9CiI7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG1ldGFkYXRhIjthOjA6e319";