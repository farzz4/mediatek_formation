1773794117
441d63ebbc39eba359c9061ece8482bd-phpdoc%3Afcfdfefc7c1fad87021d90b9dc2a7234-45e466e1879308c4f23fb369c5522932
s:10316:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lIjtzOjMxOiJSZXNldFBhc3N3b3JkQ29udHJvbGxlci50cGwucGhwIjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWVzcGFjZXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW5jbHVkZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZnVuY3Rpb25zIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNvbnN0YW50cyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjbGFzc2VzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6IjQ1ZTQ2NmUxODc5MzA4YzRmMjNmYjM2OWM1NTIyOTMyIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHBhdGgiO3M6OTY6InZlbmRvci9zeW1mb255L21ha2VyLWJ1bmRsZS9zcmMvUmVzb3VyY2VzL3NrZWxldG9uL3Jlc2V0UGFzc3dvcmQvUmVzZXRQYXNzd29yZENvbnRyb2xsZXIudHBsLnBocCI7czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBzb3VyY2UiO3M6Njc0MToiPD89ICI8P3BocFxuIiA/PgoKbmFtZXNwYWNlIDw/PSAkbmFtZXNwYWNlID8+OwoKPD89ICR1c2Vfc3RhdGVtZW50czsgPz4KCiNbUm91dGUoJy9yZXNldC1wYXNzd29yZCcpXQpjbGFzcyA8Pz0gJGNsYXNzX25hbWUgPz4gZXh0ZW5kcyBBYnN0cmFjdENvbnRyb2xsZXIKewogICAgdXNlIFJlc2V0UGFzc3dvcmRDb250cm9sbGVyVHJhaXQ7CgogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KAogICAgICAgIHByaXZhdGUgUmVzZXRQYXNzd29yZEhlbHBlckludGVyZmFjZSAkcmVzZXRQYXNzd29yZEhlbHBlciwKICAgICAgICBwcml2YXRlIEVudGl0eU1hbmFnZXJJbnRlcmZhY2UgJGVudGl0eU1hbmFnZXIKICAgICkgewogICAgfQoKICAgIC8qKgogICAgICogRGlzcGxheSAmIHByb2Nlc3MgZm9ybSB0byByZXF1ZXN0IGEgcGFzc3dvcmQgcmVzZXQuCiAgICAgKi8KICAgICNbUm91dGUoJycsIG5hbWU6ICdhcHBfZm9yZ290X3Bhc3N3b3JkX3JlcXVlc3QnKV0KICAgIHB1YmxpYyBmdW5jdGlvbiByZXF1ZXN0KFJlcXVlc3QgJHJlcXVlc3QsIE1haWxlckludGVyZmFjZSAkbWFpbGVyPD9waHAgaWYgKCR0cmFuc2xhdG9yX2F2YWlsYWJsZSk6ID8+LCBUcmFuc2xhdG9ySW50ZXJmYWNlICR0cmFuc2xhdG9yPD9waHAgZW5kaWYgPz4pOiBSZXNwb25zZQogICAgewogICAgICAgICRmb3JtID0gJHRoaXMtPmNyZWF0ZUZvcm0oPD89ICRyZXF1ZXN0X2Zvcm1fdHlwZV9jbGFzc19uYW1lID8+OjpjbGFzcyk7CiAgICAgICAgJGZvcm0tPmhhbmRsZVJlcXVlc3QoJHJlcXVlc3QpOwoKICAgICAgICBpZiAoJGZvcm0tPmlzU3VibWl0dGVkKCkgJiYgJGZvcm0tPmlzVmFsaWQoKSkgewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPnByb2Nlc3NTZW5kaW5nUGFzc3dvcmRSZXNldEVtYWlsKAogICAgICAgICAgICAgICAgJGZvcm0tPmdldCgnPD89ICRlbWFpbF9maWVsZCA/PicpLT5nZXREYXRhKCksCiAgICAgICAgICAgICAgICAkbWFpbGVyPD9waHAgaWYgKCR0cmFuc2xhdG9yX2F2YWlsYWJsZSk6ID8+LAogICAgICAgICAgICAgICAgJHRyYW5zbGF0b3I8P3BocCBlbmRpZiA/Pjw/PSAiXG4iID8+CiAgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJHRoaXMtPnJlbmRlcigncmVzZXRfcGFzc3dvcmQvcmVxdWVzdC5odG1sLnR3aWcnLCBbCiAgICAgICAgICAgICdyZXF1ZXN0Rm9ybScgPT4gJGZvcm0tPmNyZWF0ZVZpZXcoKSwKICAgICAgICBdKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvbmZpcm1hdGlvbiBwYWdlIGFmdGVyIGEgdXNlciBoYXMgcmVxdWVzdGVkIGEgcGFzc3dvcmQgcmVzZXQuCiAgICAgKi8KICAgICNbUm91dGUoJy9jaGVjay1lbWFpbCcsIG5hbWU6ICdhcHBfY2hlY2tfZW1haWwnKV0KICAgIHB1YmxpYyBmdW5jdGlvbiBjaGVja0VtYWlsKCk6IFJlc3BvbnNlCiAgICB7CiAgICAgICAgLy8gR2VuZXJhdGUgYSBmYWtlIHRva2VuIGlmIHRoZSB1c2VyIGRvZXMgbm90IGV4aXN0IG9yIHNvbWVvbmUgaGl0IHRoaXMgcGFnZSBkaXJlY3RseS4KICAgICAgICAvLyBUaGlzIHByZXZlbnRzIGV4cG9zaW5nIHdoZXRoZXIgb3Igbm90IGEgdXNlciB3YXMgZm91bmQgd2l0aCB0aGUgZ2l2ZW4gZW1haWwgYWRkcmVzcyBvciBub3QKICAgICAgICBpZiAobnVsbCA9PT0gKCRyZXNldFRva2VuID0gJHRoaXMtPmdldFRva2VuT2JqZWN0RnJvbVNlc3Npb24oKSkpIHsKICAgICAgICAgICAgJHJlc2V0VG9rZW4gPSAkdGhpcy0+cmVzZXRQYXNzd29yZEhlbHBlci0+Z2VuZXJhdGVGYWtlUmVzZXRUb2tlbigpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICR0aGlzLT5yZW5kZXIoJ3Jlc2V0X3Bhc3N3b3JkL2NoZWNrX2VtYWlsLmh0bWwudHdpZycsIFsKICAgICAgICAgICAgJ3Jlc2V0VG9rZW4nID0+ICRyZXNldFRva2VuLAogICAgICAgIF0pOwogICAgfQoKICAgIC8qKgogICAgICogVmFsaWRhdGVzIGFuZCBwcm9jZXNzIHRoZSByZXNldCBVUkwgdGhhdCB0aGUgdXNlciBjbGlja2VkIGluIHRoZWlyIGVtYWlsLgogICAgICovCiAgICAjW1JvdXRlKCcvcmVzZXQve3Rva2VufScsIG5hbWU6ICdhcHBfcmVzZXRfcGFzc3dvcmQnKV0KICAgIHB1YmxpYyBmdW5jdGlvbiByZXNldChSZXF1ZXN0ICRyZXF1ZXN0LCBVc2VyUGFzc3dvcmRIYXNoZXJJbnRlcmZhY2UgJHBhc3N3b3JkSGFzaGVyPD9waHAgaWYgKCR0cmFuc2xhdG9yX2F2YWlsYWJsZSk6ID8+LCBUcmFuc2xhdG9ySW50ZXJmYWNlICR0cmFuc2xhdG9yPD9waHAgZW5kaWYgPz4sIHN0cmluZyAkdG9rZW4gPSBudWxsKTogUmVzcG9uc2UKICAgIHsKICAgICAgICBpZiAoJHRva2VuKSB7CiAgICAgICAgICAgIC8vIFdlIHN0b3JlIHRoZSB0b2tlbiBpbiBzZXNzaW9uIGFuZCByZW1vdmUgaXQgZnJvbSB0aGUgVVJMLCB0byBhdm9pZCB0aGUgVVJMIGJlaW5nCiAgICAgICAgICAgIC8vIGxvYWRlZCBpbiBhIGJyb3dzZXIgYW5kIHBvdGVudGlhbGx5IGxlYWtpbmcgdGhlIHRva2VuIHRvIDNyZCBwYXJ0eSBKYXZhU2NyaXB0LgogICAgICAgICAgICAkdGhpcy0+c3RvcmVUb2tlbkluU2Vzc2lvbigkdG9rZW4pOwoKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdFRvUm91dGUoJ2FwcF9yZXNldF9wYXNzd29yZCcpOwogICAgICAgIH0KCiAgICAgICAgJHRva2VuID0gJHRoaXMtPmdldFRva2VuRnJvbVNlc3Npb24oKTsKICAgICAgICBpZiAobnVsbCA9PT0gJHRva2VuKSB7CiAgICAgICAgICAgIHRocm93ICR0aGlzLT5jcmVhdGVOb3RGb3VuZEV4Y2VwdGlvbignTm8gcmVzZXQgcGFzc3dvcmQgdG9rZW4gZm91bmQgaW4gdGhlIFVSTCBvciBpbiB0aGUgc2Vzc2lvbi4nKTsKICAgICAgICB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgICR1c2VyID0gJHRoaXMtPnJlc2V0UGFzc3dvcmRIZWxwZXItPnZhbGlkYXRlVG9rZW5BbmRGZXRjaFVzZXIoJHRva2VuKTsKICAgICAgICB9IGNhdGNoIChSZXNldFBhc3N3b3JkRXhjZXB0aW9uSW50ZXJmYWNlICRlKSB7CiAgICAgICAgICAgICR0aGlzLT5hZGRGbGFzaCgncmVzZXRfcGFzc3dvcmRfZXJyb3InLCBzcHJpbnRmKAogICAgICAgICAgICAgICAgJyVzIC0gJXMnLAogICAgICAgICAgICAgICAgPD9waHAgaWYgKCR0cmFuc2xhdG9yX2F2YWlsYWJsZSk6ID8+JHRyYW5zbGF0b3ItPnRyYW5zKDw/PSAkcHJvYmxlbV92YWxpZGF0ZV9tZXNzYWdlX29yX2NvbnN0YW50ID8+LCBbXSwgJ1Jlc2V0UGFzc3dvcmRCdW5kbGUnKTw/cGhwIGVsc2U6ID8+PD89ICRwcm9ibGVtX3ZhbGlkYXRlX21lc3NhZ2Vfb3JfY29uc3RhbnQgPz48P3BocCBlbmRpZiA/PiwKICAgICAgICAgICAgICAgIDw/cGhwIGlmICgkdHJhbnNsYXRvcl9hdmFpbGFibGUpOiA/PiR0cmFuc2xhdG9yLT50cmFucygkZS0+Z2V0UmVhc29uKCksIFtdLCAnUmVzZXRQYXNzd29yZEJ1bmRsZScpPD9waHAgZWxzZTogPz4kZS0+Z2V0UmVhc29uKCk8P3BocCBlbmRpZiA/Pjw/PSAiXG4iID8+CiAgICAgICAgICAgICkpOwoKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdFRvUm91dGUoJ2FwcF9mb3Jnb3RfcGFzc3dvcmRfcmVxdWVzdCcpOwogICAgICAgIH0KCiAgICAgICAgLy8gVGhlIHRva2VuIGlzIHZhbGlkOyBhbGxvdyB0aGUgdXNlciB0byBjaGFuZ2UgdGhlaXIgcGFzc3dvcmQuCiAgICAgICAgJGZvcm0gPSAkdGhpcy0+Y3JlYXRlRm9ybSg8Pz0gJHJlc2V0X2Zvcm1fdHlwZV9jbGFzc19uYW1lID8+OjpjbGFzcyk7CiAgICAgICAgJGZvcm0tPmhhbmRsZVJlcXVlc3QoJHJlcXVlc3QpOwoKICAgICAgICBpZiAoJGZvcm0tPmlzU3VibWl0dGVkKCkgJiYgJGZvcm0tPmlzVmFsaWQoKSkgewogICAgICAgICAgICAvLyBBIHBhc3N3b3JkIHJlc2V0IHRva2VuIHNob3VsZCBiZSB1c2VkIG9ubHkgb25jZSwgcmVtb3ZlIGl0LgogICAgICAgICAgICAkdGhpcy0+cmVzZXRQYXNzd29yZEhlbHBlci0+cmVtb3ZlUmVzZXRSZXF1ZXN0KCR0b2tlbik7CgogICAgICAgICAgICAvLyBFbmNvZGUoaGFzaCkgdGhlIHBsYWluIHBhc3N3b3JkLCBhbmQgc2V0IGl0LgogICAgICAgICAgICAkZW5jb2RlZFBhc3N3b3JkID0gJHBhc3N3b3JkSGFzaGVyLT5oYXNoUGFzc3dvcmQoCiAgICAgICAgICAgICAgICAkdXNlciwKICAgICAgICAgICAgICAgICRmb3JtLT5nZXQoJ3BsYWluUGFzc3dvcmQnKS0+Z2V0RGF0YSgpCiAgICAgICAgICAgICk7CgogICAgICAgICAgICAkdXNlci0+PD89ICRwYXNzd29yZF9zZXR0ZXIgPz4oJGVuY29kZWRQYXNzd29yZCk7CiAgICAgICAgICAgICR0aGlzLT5lbnRpdHlNYW5hZ2VyLT5mbHVzaCgpOwoKICAgICAgICAgICAgLy8gVGhlIHNlc3Npb24gaXMgY2xlYW5lZCB1cCBhZnRlciB0aGUgcGFzc3dvcmQgaGFzIGJlZW4gY2hhbmdlZC4KICAgICAgICAgICAgJHRoaXMtPmNsZWFuU2Vzc2lvbkFmdGVyUmVzZXQoKTsKCiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+cmVkaXJlY3RUb1JvdXRlKCc8Pz0gJHN1Y2Nlc3NfcmVkaXJlY3Rfcm91dGUgPz4nKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAkdGhpcy0+cmVuZGVyKCdyZXNldF9wYXNzd29yZC9yZXNldC5odG1sLnR3aWcnLCBbCiAgICAgICAgICAgICdyZXNldEZvcm0nID0+ICRmb3JtLT5jcmVhdGVWaWV3KCksCiAgICAgICAgXSk7CiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBwcm9jZXNzU2VuZGluZ1Bhc3N3b3JkUmVzZXRFbWFpbChzdHJpbmcgJGVtYWlsRm9ybURhdGEsIE1haWxlckludGVyZmFjZSAkbWFpbGVyPD9waHAgaWYgKCR0cmFuc2xhdG9yX2F2YWlsYWJsZSk6ID8+LCBUcmFuc2xhdG9ySW50ZXJmYWNlICR0cmFuc2xhdG9yPD9waHAgZW5kaWYgPz4pOiBSZWRpcmVjdFJlc3BvbnNlCiAgICB7CiAgICAgICAgJHVzZXIgPSAkdGhpcy0+ZW50aXR5TWFuYWdlci0+Z2V0UmVwb3NpdG9yeSg8Pz0gJHVzZXJfY2xhc3NfbmFtZSA/Pjo6Y2xhc3MpLT5maW5kT25lQnkoWwogICAgICAgICAgICAnPD89ICRlbWFpbF9maWVsZCA/PicgPT4gJGVtYWlsRm9ybURhdGEsCiAgICAgICAgXSk7CgogICAgICAgIC8vIERvIG5vdCByZXZlYWwgd2hldGhlciBhIHVzZXIgYWNjb3VudCB3YXMgZm91bmQgb3Igbm90LgogICAgICAgIGlmICghJHVzZXIpIHsKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdFRvUm91dGUoJ2FwcF9jaGVja19lbWFpbCcpOwogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJHJlc2V0VG9rZW4gPSAkdGhpcy0+cmVzZXRQYXNzd29yZEhlbHBlci0+Z2VuZXJhdGVSZXNldFRva2VuKCR1c2VyKTsKICAgICAgICB9IGNhdGNoIChSZXNldFBhc3N3b3JkRXhjZXB0aW9uSW50ZXJmYWNlICRlKSB7CiAgICAgICAgICAgIC8vIElmIHlvdSB3YW50IHRvIHRlbGwgdGhlIHVzZXIgd2h5IGEgcmVzZXQgZW1haWwgd2FzIG5vdCBzZW50LCB1bmNvbW1lbnQKICAgICAgICAgICAgLy8gdGhlIGxpbmVzIGJlbG93IGFuZCBjaGFuZ2UgdGhlIHJlZGlyZWN0IHRvICdhcHBfZm9yZ290X3Bhc3N3b3JkX3JlcXVlc3QnLgogICAgICAgICAgICAvLyBDYXV0aW9uOiBUaGlzIG1heSByZXZlYWwgaWYgYSB1c2VyIGlzIHJlZ2lzdGVyZWQgb3Igbm90LgogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyAkdGhpcy0+YWRkRmxhc2goJ3Jlc2V0X3Bhc3N3b3JkX2Vycm9yJywgc3ByaW50ZigKICAgICAgICAgICAgLy8gICAgICclcyAtICVzJywKICAgICAgICAgICAgLy8gICAgIDw/cGhwIGlmICgkdHJhbnNsYXRvcl9hdmFpbGFibGUpOiA/PiR0cmFuc2xhdG9yLT50cmFucyg8Pz0gJHByb2JsZW1faGFuZGxlX21lc3NhZ2Vfb3JfY29uc3RhbnQgPz4sIFtdLCAnUmVzZXRQYXNzd29yZEJ1bmRsZScpPD9waHAgZWxzZTogPz48Pz0gJHByb2JsZW1faGFuZGxlX21lc3NhZ2Vfb3JfY29uc3RhbnQgPz48P3BocCBlbmRpZiA/PiwKICAgICAgICAgICAgLy8gICAgIDw/cGhwIGlmICgkdHJhbnNsYXRvcl9hdmFpbGFibGUpOiA/PiR0cmFuc2xhdG9yLT50cmFucygkZS0+Z2V0UmVhc29uKCksIFtdLCAnUmVzZXRQYXNzd29yZEJ1bmRsZScpPD9waHAgZWxzZTogPz4kZS0+Z2V0UmVhc29uKCk8P3BocCBlbmRpZiA/Pjw/PSAiXG4iID8+CiAgICAgICAgICAgIC8vICkpOwoKICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5yZWRpcmVjdFRvUm91dGUoJ2FwcF9jaGVja19lbWFpbCcpOwogICAgICAgIH0KCiAgICAgICAgJGVtYWlsID0gKG5ldyBUZW1wbGF0ZWRFbWFpbCgpKQogICAgICAgICAgICAtPmZyb20obmV3IEFkZHJlc3MoJzw/PSAkZnJvbV9lbWFpbCA/PicsICc8Pz0gJGZyb21fZW1haWxfbmFtZSA/PicpKQogICAgICAgICAgICAtPnRvKCR1c2VyLT48Pz0gJGVtYWlsX2dldHRlciA/PigpKQogICAgICAgICAgICAtPnN1YmplY3QoJ1lvdXIgcGFzc3dvcmQgcmVzZXQgcmVxdWVzdCcpCiAgICAgICAgICAgIC0+aHRtbFRlbXBsYXRlKCdyZXNldF9wYXNzd29yZC9lbWFpbC5odG1sLnR3aWcnKQogICAgICAgICAgICAtPmNvbnRleHQoWwogICAgICAgICAgICAgICAgJ3Jlc2V0VG9rZW4nID0+ICRyZXNldFRva2VuLAogICAgICAgICAgICBdKQogICAgICAgIDsKCiAgICAgICAgJG1haWxlci0+c2VuZCgkZW1haWwpOwoKICAgICAgICAvLyBTdG9yZSB0aGUgdG9rZW4gb2JqZWN0IGluIHNlc3Npb24gZm9yIHJldHJpZXZhbCBpbiBjaGVjay1lbWFpbCByb3V0ZS4KICAgICAgICAkdGhpcy0+c2V0VG9rZW5PYmplY3RJblNlc3Npb24oJHJlc2V0VG9rZW4pOwoKICAgICAgICByZXR1cm4gJHRoaXMtPnJlZGlyZWN0VG9Sb3V0ZSgnYXBwX2NoZWNrX2VtYWlsJyk7CiAgICB9Cn0KIjtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGRvY0Jsb2NrIjtOO3M6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAbWV0YWRhdGEiO2E6MDp7fX0=";